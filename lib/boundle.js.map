{"version":3,"file":"boundle.js","sources":["../src/vnode/text.ts","../src/vnode/fragment.ts","../src/vnode/component.ts","../src/vnode/array.ts","../src/vnode/alive.ts","../src/vnode/vnode.ts","../src/utils.ts","../src/reactive/update.ts","../src/reactive/reactive.ts","../src/reactive/ref.ts","../src/reactive/utils.ts","../src/reactive/active.ts","../src/lifeCycle.ts","../src/plugin.ts","../src/render.ts","../src/directive/directive.ts","../src/reactive/watch.ts","../src/runtime/element.ts","../src/runtime/patch.ts","../src/runtime/mount.ts","../src/component.ts","../src/directive/preset/className.ts","../src/app.ts"],"sourcesContent":["import {VNode, VNODE_TYPE, VNodeElement} from \"./vnode\";\r\n\r\n\r\nexport const TextSymbol = Symbol('Text');\r\nexport interface VText extends VNode {\r\n\r\n  // 虚拟节点类型\r\n  type: symbol,\r\n\r\n  // 虚拟节点子节点\r\n  children: string,\r\n\r\n  // 虚拟节点表标识\r\n  flag: VNODE_TYPE.TEXT\r\n\r\n  el: Text\r\n\r\n}\r\n","import {VNode, VNODE_TYPE, VNodeElement} from \"./vnode\";\r\n\r\nexport const FragmentSymbol = Symbol('Fragment');\r\nexport interface VFragment extends VNode {\r\n\r\n  // 虚拟节点类型\r\n  type: symbol,\r\n\r\n  // 虚拟节点子节点\r\n  children: Array<VNode>,\r\n\r\n  // 虚拟节点表标识\r\n  flag: VNODE_TYPE.FRAGMENT\r\n\r\n  // 锚点\r\n  anchor: Text,\r\n  el: Text\r\n\r\n}\r\n","import {VNode, VNODE_TYPE, OriginVNode, VNodeProps} from \"./vnode\";\r\nimport { ComponentLifeCycle } from '../lifeCycle'\r\nimport { ComponentInstance } from '../component'\r\nimport {AppUtils} from '../plugin'\r\n\r\nexport interface ComponentContext {\r\n  props: Record<string, any>\r\n  children: Array<VNode>\r\n  life: ComponentLifeCycle\r\n  utils: AppUtils\r\n}\r\n\r\n/** 函数组件类型 */\r\nexport interface FunctionComponentType {\r\n  (context: ComponentContext): OriginVNode\r\n}\r\n\r\n/** 类组件类型 */\r\nexport interface ClassComponentType {\r\n  new (props: Record<string, any>, children: Array<VNode>): ComponentInstance\r\n}\r\n\r\nexport type ComponentType = FunctionComponentType | ClassComponentType\r\n\r\nexport const VComponentSymbol = Symbol('VComponent')\r\nexport type VComponentType = typeof VComponentSymbol\r\n\r\nexport interface VComponent extends VNode {\r\n\r\n  // 虚拟节点类型\r\n  type: VComponentType,\r\n\r\n  // 虚拟节点属性\r\n  props: VNodeProps,\r\n\r\n  // 虚拟节点子节点\r\n  children: Array<VNode>,\r\n\r\n  // 虚拟节点表标识\r\n  flag: VNODE_TYPE.COMPONENT\r\n\r\n  root: VNode,\r\n\r\n  lifeStyleInstance: ComponentLifeCycle\r\n\r\n}\r\n\r\n","import {VNode, VNODE_TYPE, VNodeElement} from \"./vnode\";\r\n\r\nexport const ArraySymbol = Symbol('ArrayNode');\r\nexport type VArrayType = typeof ArraySymbol\r\nexport interface VArrayNode extends VNode {\r\n\r\n  // 虚拟节点类型\r\n  type: symbol,\r\n\r\n  // 虚拟节点子节点\r\n  children: Array<VNode>,\r\n\r\n  // 虚拟节点表标识\r\n  flag: VNODE_TYPE.ARRAYNODE\r\n\r\n  // 锚点\r\n  anchor: Text,\r\n  el: Text,\r\n\r\n  // 记录当前数组节点依赖的响应式数组\r\n  depArray: Array<any>\r\n}\r\n","import { Activer } from \"../reactive\"\r\nimport { VNode, VNODE_TYPE, OriginVNode } from \"./vnode\"\r\n\r\nexport const AliveSymbol = Symbol('Alive')\r\nexport type VAliveType = typeof AliveSymbol\r\nexport interface VAlive extends VNode {\r\n\r\n  // 虚拟节点类型\r\n  type: symbol,\r\n  // 虚拟节点表标识\r\n  flag: VNODE_TYPE.ELEMENT\r\n\r\n  activer: Activer<OriginVNode>\r\n  // 目前存在的节点\r\n  vnode: VNode\r\n}\r\n","import { Activer } from \"../reactive\"\r\nimport { ComponentType } from './component'\r\n\r\n/**\r\n * 虚拟dom节点类型枚举\r\n*/\r\nexport enum VNODE_TYPE {\r\n  // 普通元素节点类型\r\n  ELEMENT,\r\n  // 文本节点类型\r\n  TEXT,\r\n  FRAGMENT,\r\n  COMPONENT,\r\n  ARRAYNODE,\r\n  ALIVE\r\n}\r\n\r\nexport type VNodeElement = ChildNode\r\n\r\n/**\r\n * 虚拟dom接口类型\r\n*/\r\nexport interface VNode {\r\n\r\n  // 虚拟节点类型\r\n  type: string | symbol | ComponentType,\r\n\r\n  // 虚拟节点表标识\r\n  flag: VNODE_TYPE\r\n\r\n  // 虚拟节点属性\r\n  props?: Record<string, any>,\r\n\r\n  // 虚拟节点子节点\r\n  children?: Array<VNode> | string,\r\n\r\n  // 真实节点\r\n  el?: VNodeElement\r\n  anchor?: VNodeElement\r\n\r\n  activer?: Activer\r\n  // 目前存在的节点\r\n  vnode?: VNode\r\n\r\n}\r\n\r\n// 未经过标准化的childVNode类型\r\nexport type NotFunctionOriginVNode= string | VNode | Array<OriginVNode> | Activer\r\nexport type WithFunctionOriginVNode= (() => OriginVNode) | NotFunctionOriginVNode\r\nexport type OriginVNode= WithFunctionOriginVNode | Exclude<any, WithFunctionOriginVNode>\r\n\r\n/** 虚拟节点属性 todo */\r\nexport interface VNodeProps {\r\n  [propName: string]: any\r\n}\r\n\r\n","import {\r\n  ArraySymbol,\r\n  FragmentSymbol,\r\n  TextSymbol, VAlive,\r\n  VArrayNode, VComponent,\r\n  VElement,\r\n  VFragment,\r\n  VNode,\r\n  VNODE_TYPE,\r\n  VText\r\n} from './vnode'\r\nimport {Activer} from './reactive'\r\n\r\nexport function isString(content: unknown): content is string {\r\n  return typeof content === 'string'\r\n}\r\n\r\nexport function isFunction(content: unknown): content is Function {\r\n  return typeof content === 'function'\r\n}\r\n\r\nexport function isFragment(content: unknown): boolean {\r\n  return content === FragmentSymbol\r\n}\r\n\r\nexport function isArrayNode(content: unknown): boolean {\r\n  return content === ArraySymbol\r\n}\r\n\r\nexport function isText(content: unknown): boolean {\r\n  return content === TextSymbol\r\n}\r\n\r\nexport function isActiver(content: unknown): content is Activer {\r\n  return isObject(content) && (content as Record<any, any>).flag === 'activer'\r\n}\r\n\r\nexport function isVNode(content: unknown): content is VNode {\r\n  return isObject(content) && (content as Record<any, any>).flag in VNODE_TYPE\r\n}\r\n\r\nexport function isObjectExact(content: unknown): content is Object {\r\n  return isObject(content) && content.constructor === Object\r\n}\r\n\r\nexport function isOnEvent(str: string): boolean {\r\n  return /^on.+$/.test(str)\r\n}\r\n\r\nexport function isObject(content: unknown): content is object {\r\n  return typeof content === 'object' && content !== null\r\n}\r\n\r\n\r\nexport function isArray(content: unknown): content is Array<any> {\r\n  return Array.isArray(content)\r\n}\r\n\r\n// 判断是否是一个数组节点\r\nexport function isVArrayNode(node: VNode): node is VArrayNode {\r\n  return node.flag === VNODE_TYPE.ARRAYNODE\r\n}\r\nexport function isVTextNode(node: VNode): node is VText {\r\n  return node.flag === VNODE_TYPE.TEXT\r\n}\r\nexport function isVElementNode(node: VNode): node is VElement {\r\n  return node.flag === VNODE_TYPE.ELEMENT\r\n}\r\nexport function isVFragmentNode(node: VNode): node is VFragment {\r\n  return node.flag === VNODE_TYPE.FRAGMENT\r\n}\r\nexport function isVComponentNode(node: VNode): node is VComponent {\r\n  return node.flag === VNODE_TYPE.COMPONENT\r\n}\r\nexport function isVAliveNode(node: VNode): node is VAlive {\r\n  return node.flag === VNODE_TYPE.ALIVE\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","import { Watcher } from \"./watch\";\r\n\r\nlet updating = false\r\nconst watcherTask: Array<Watcher> = []\r\n\r\nexport function runUpdate(watcher: Watcher) {\r\n  let index: number = watcherTask.indexOf(watcher)\r\n  if (!(index > -1)) watcherTask.push(watcher)\r\n  if (!updating) {\r\n    updating = true\r\n    Promise.resolve()\r\n      .then(() => {\r\n        let watcher: Watcher | undefined = undefined\r\n        while (watcher = watcherTask.shift()) {\r\n          watcher.update()\r\n        }\r\n      }).finally(() => {\r\n        updating = false\r\n      })\r\n  }\r\n}","import { isArray, isObjectExact, isVNode } from \"../utils\"\r\nimport { Watcher } from \"./watch\"\r\nimport { runUpdate } from './update'\r\n\r\n// 目标对象到映射对象\r\nconst targetMap = new WeakMap()\r\n// 全局变量watcher\r\nlet activeWatcher: Watcher | null = null\r\nconst REACTIVE = Symbol('reactive')\r\n\r\n/**\r\n * 实现响应式对象\r\n*/\r\nexport function reactive<T extends Record<string | symbol, any>>(target: T): T {\r\n  if (target[REACTIVE]) return target\r\n\r\n  let handler: ProxyHandler<T> = {\r\n    get(target, prop, receiver) {\r\n      if (prop === REACTIVE) return true\r\n      const res = Reflect.get(target, prop, receiver)\r\n\r\n      if (isObjectExact(res) && !isVNode(res)) {\r\n        return reactive(res)\r\n      }\r\n\r\n      if (Array.isArray(res)) {\r\n        track(target, prop)\r\n        return reactiveArray(res, target, prop)\r\n      }\r\n\r\n      track(target, prop)\r\n      return res\r\n    },\r\n\r\n    set(target, prop, value, receiver) {\r\n      const res = Reflect.set(target, prop, value, receiver)\r\n      trigger(target, prop)\r\n      return res\r\n    }\r\n  }\r\n\r\n  return new Proxy(target, handler)\r\n}\r\n\r\n/**\r\n * 设置响应式数组\r\n*/\r\nfunction reactiveArray(targetArr: Array<any>, targetObj: Record<any, any>, Arrprop: string | symbol) {\r\n  let handler: ProxyHandler<Record<any, any>> = {\r\n    get(target, prop, receiver) {\r\n      const res = Reflect.get(target, prop, receiver)\r\n\r\n      if (isObjectExact(res)) {\r\n        return reactive(res)\r\n      }\r\n\r\n      return res\r\n    },\r\n    set(target, prop, value, receiver) {\r\n      const res = Reflect.set(target, prop, value, receiver)\r\n      trigger(targetObj, Arrprop)\r\n      return res\r\n    }\r\n  }\r\n\r\n  return new Proxy(targetArr, handler)\r\n}\r\n\r\n/**\r\n * 响应触发依赖\r\n*/\r\nexport function trigger(target: Record<string | symbol, any>, prop: string | symbol) {\r\n  let mapping: Record<string | symbol, Array<Watcher>> = targetMap.get(target)\r\n  if (!mapping) return\r\n\r\n  let mappingProp: Array<Watcher> = mapping[prop]\r\n  if (!mappingProp) return\r\n\r\n  // mappingProp.forEach(watcher => watcher.update(oldValue, newValue))\r\n  mappingProp.forEach(watcher => {\r\n    // 针对于对数组响应做特殊处理\r\n    if (isArray(target[prop])) {\r\n      watcher.nextDepArr = target[prop]\r\n    }\r\n    runUpdate(watcher)\r\n  })\r\n}\r\n\r\n/**\r\n * 追踪绑定依赖\r\n*/\r\nexport function track(target: Record<string | symbol, any>, prop: string | symbol) {\r\n  if (!activeWatcher) return\r\n\r\n  let mapping: Record<string | symbol, Array<Watcher>> = targetMap.get(target)\r\n  if (!mapping) targetMap.set(target, mapping = {})\r\n\r\n  let mappingProp: Array<Watcher> = mapping[prop]\r\n  if (!mappingProp) mappingProp = mapping[prop] = []\r\n\r\n  // 针对于对数组响应做特殊处理\r\n  if (isArray(target[prop])) {\r\n    if (activeWatcher.depArr) {\r\n      activeWatcher.depArr = false\r\n    } else {\r\n      if (activeWatcher.depArr === undefined) {\r\n        activeWatcher.depArr = target[prop].slice()\r\n      }\r\n    }\r\n  }\r\n\r\n  mappingProp.push(activeWatcher)\r\n}\r\n\r\n// 设置全局变量\r\nexport function setActiver(fn: Watcher | null) {\r\n  activeWatcher = fn\r\n}\r\n// 设置全局变量\r\nexport function getActiver(): Watcher | null {\r\n  return activeWatcher\r\n}\r\n\r\n","import { track, trigger } from './reactive'\r\n\r\nexport class RefImpl<T = any> {\r\n  private _value: T\r\n  private readonly _target: Record<any, any>\r\n\r\n  constructor(value: T) {\r\n    this._value = value\r\n    this._target = { value: this._value }\r\n  }\r\n\r\n  get value() {\r\n    track(this._target, 'value')\r\n    return this._value\r\n  }\r\n\r\n  set value(value) {\r\n    this._value = value\r\n    this._target.value = this._value\r\n    trigger(this._target, 'value')\r\n  }\r\n}\r\n\r\n\r\nexport function ref<T extends any>(value: T): RefImpl<T> {\r\n  return new RefImpl(value)\r\n}","import { ref } from './ref'\r\nimport { reactive } from './reactive'\r\n\r\n\r\nexport function state<T extends any>(value: T) {\r\n  return ref(value)\r\n}\r\n\r\nexport function defineState<T extends Record<string | symbol, any>>(target: T): T {\r\n  return reactive(target)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","\r\n/**\r\n * 响应式对象\r\n*/\r\nexport class Activer<T = any> {\r\n  callback: () => T\r\n  flag: string = 'activer'\r\n\r\n  constructor(fn: () => T) {\r\n    this.callback = fn\r\n  }\r\n\r\n  get value(): T {\r\n    return this.callback()\r\n  }\r\n}\r\n\r\n/**\r\n * 外置函数\r\n*/\r\nexport function active<T extends any>(fn: () => T): Activer<T> {\r\n  return new Activer(fn)\r\n}\r\n\r\n","import { ComponentInstance } from './component'\r\n\r\n/**\r\n * 主要实现关于组件的生命周期\r\n */\r\n\r\n\r\nexport interface ComponentLifeCycleInstance {\r\n\r\n    /** 组件示例创建之后触发 */\r\n    created(fn: () => void): void\r\n\r\n    /** 组件示例在渲染之前触发(DOM还没有生成) */\r\n    beforeMounted(fn: () => void): void\r\n\r\n    /** dom已经生成到js内存但还没挂载 */\r\n    readyMounted(fn: () => void): void\r\n\r\n    /** dom挂载到了页面上*/\r\n    mounted(fn: () => void): void\r\n\r\n    /** 卸载之前触发 */\r\n    beforeUnMounted(fn: () => void):void\r\n\r\n    /** 卸载之后触发 */\r\n    unMounted(fn: () => void):void\r\n}\r\n\r\ntype LifeCycleNames<T = keyof ComponentLifeCycleInstance> = T extends string ? `${T}List` : never\r\ntype GetCycleName<T> = T extends `${infer U}List` ? U : never\r\n\r\n\r\n\r\nexport class ComponentLifeCycle implements ComponentLifeCycleInstance {\r\n\r\n\r\n    constructor(\r\n        private readonly createdList: Array<() => void> = [],\r\n        private readonly beforeMountedList: Array<() => void> = [],\r\n        private readonly readyMountedList: Array<() => void> = [],\r\n        private readonly mountedList: Array<() => void> = [],\r\n        private readonly beforeUnMountedList: Array<() => void> = [],\r\n        private readonly unMountedList: Array<() => void> = []\r\n    ) {\r\n        // this.createdList = []\r\n        // this.beforeMountedList = []\r\n        // this.readyMountedList = []\r\n        // this.mountedList = []\r\n        // this.beforeUnMountedList = []\r\n        // this.unMountedList = []\r\n    }\r\n\r\n    created(fn: () => void): void {\r\n        this.createdList.push(fn)\r\n    }\r\n\r\n    beforeMounted(fn: () => void): void {\r\n        this.beforeMountedList.push(fn)\r\n    }\r\n\r\n    readyMounted(fn: () => void): void {\r\n        this.readyMountedList.push(fn)\r\n    }\r\n\r\n    mounted(fn: () => void): void {\r\n        this.mountedList.push(fn)\r\n    }\r\n\r\n    beforeUnMounted(fn: () => void): void {\r\n        this.beforeUnMountedList.push(fn)\r\n    }\r\n\r\n    unMounted(fn: () => void): void {\r\n        this.unMountedList.push(fn)\r\n    }\r\n\r\n    emit(lifeName: keyof ComponentLifeCycleInstance) {\r\n        this[`${lifeName}List`].forEach(fn => fn())\r\n    }\r\n\r\n}\r\n\r\n// 生成类组件生命周期实例\r\nexport function createClassComponentLife(component: ComponentInstance) {\r\n    let lifeNames: [\r\n        'created',\r\n        'beforeMounted',\r\n        'readyMounted',\r\n        'mounted',\r\n        'beforeUnMounted',\r\n        'unMounted'\r\n    ] = ['created', 'beforeMounted', 'readyMounted', 'mounted', 'beforeUnMounted', 'unMounted']\r\n\r\n    let lifeCycle = new ComponentLifeCycle()\r\n    component.life = lifeCycle\r\n\r\n    lifeNames.forEach(lifeName => {\r\n        let fn = component[lifeName]\r\n        if(!fn) return\r\n        lifeCycle[lifeName](fn.bind(component))\r\n    })\r\n\r\n    return lifeCycle\r\n}\r\n\r\n\r\n","import {\r\n    state,\r\n    defineState,\r\n    watch,\r\n    active\r\n} from \"./reactive\";\r\nimport { renderApi as h } from \"./render\";\r\nimport {App} from \"./app\";\r\nimport {\r\n    isActiver,\r\n    isVArrayNode,\r\n    isVNode,\r\n    isVFragmentNode,\r\n    isVElementNode,\r\n    isVTextNode,\r\n    isVComponentNode,\r\n    isVAliveNode\r\n} from './utils'\r\nimport {promisify} from \"util\";\r\n\r\n// todo\r\n\r\n// 实现插件功能\r\nexport interface AppUtils {\r\n    state: typeof state\r\n    defineState: typeof defineState\r\n    h: typeof h\r\n    watch: typeof watch\r\n    active: typeof active\r\n\r\n    isActiver: typeof isActiver\r\n    isVArrayNode: typeof isVArrayNode\r\n    isVNode: typeof isVNode\r\n    isVFragmentNode: typeof isVFragmentNode\r\n    isVElementNode: typeof isVElementNode\r\n    isVTextNode: typeof isVTextNode\r\n    isVComponentNode: typeof isVComponentNode\r\n    isVAliveNode: typeof isVAliveNode\r\n}\r\n\r\nexport interface AppContext {\r\n    app: App\r\n    utils: AppUtils\r\n}\r\n\r\nexport type AppPluginType = AppPluginInstance | AppPluginFun\r\n\r\nexport interface AppPluginInstance {\r\n    install(utils: AppContext): void\r\n}\r\nexport interface AppPluginFun {\r\n    (utils: AppContext): void\r\n}\r\n\r\nexport abstract class AppPlugin {\r\n    abstract install(utils: AppContext): void\r\n}\r\n\r\n// 给插件提供的能力\r\nexport const appUtils: AppUtils = {\r\n    state,\r\n    defineState,\r\n    h,\r\n    watch,\r\n    active,\r\n\r\n    isActiver,\r\n    isVArrayNode,\r\n    isVNode,\r\n    isVFragmentNode,\r\n    isVElementNode,\r\n    isVTextNode,\r\n    isVComponentNode,\r\n    isVAliveNode\r\n}\r\n\r\nexport function definePlugin(appPlugin: AppPluginFun) {\r\n    return appPlugin\r\n}\r\n","import {active} from \"./reactive\";\r\nimport {Activer} from './reactive'\r\nimport {\r\n  isActiver,\r\n  isArray,\r\n  isArrayNode,\r\n  isFragment,\r\n  isFunction,\r\n  isOnEvent,\r\n  isString,\r\n  isText,\r\n  isVNode} from \"./utils\";\r\nimport {\r\n  ClassComponentType,\r\n  ComponentType,\r\n  FunctionComponentType,\r\n  VComponent\r\n} from \"./vnode\";\r\nimport {\r\n  OriginVNode,\r\n  VNode,\r\n  VNODE_TYPE,\r\n  VNodeProps\r\n} from \"./vnode\";\r\nimport {\r\n  ArraySymbol,\r\n  AliveSymbol,\r\n  TextSymbol,\r\n  FragmentSymbol,\r\n  VComponentSymbol\r\n} from \"./vnode\";\r\nimport {ComponentLifeCycle, createClassComponentLife} from \"./lifeCycle\";\r\nimport {appUtils} from \"./plugin\";\r\n\r\n/**\r\n * 传说中的render函数\r\n*/\r\n\r\nexport type HSymbol = typeof TextSymbol | typeof FragmentSymbol | typeof AliveSymbol | typeof ArraySymbol\r\nexport type HType = string | HSymbol | ComponentType\r\nexport type H = (type: HType,  props?: VNodeProps, children?: OriginVNode | Array<OriginVNode>) => VNode\r\n\r\n/**\r\n * 函数转化为activer转化为VAlive\r\n * activer转化为VAlive\r\n * string转化为VText\r\n * 数组转化为VArray\r\n * 其他转化为VText\r\n*/\r\nexport function createVNode(originVNode: OriginVNode): VNode {\r\n  if (isVNode(originVNode)) return originVNode\r\n\r\n  if (isFunction(originVNode)) return renderAlive(active(originVNode))\r\n  else if (isActiver(originVNode)) return renderAlive(originVNode)\r\n  else if (isString(originVNode)) return renderText(originVNode)\r\n  else if (isArray(originVNode)) return renderArrayNode(originVNode.map(item => createVNode(item)))\r\n  else {\r\n    // todo\r\n    let value = originVNode\r\n    let retText: VNode\r\n    if (!value && typeof value !== 'number') retText = renderText('')\r\n    else retText = renderText(String(value))\r\n    return retText\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * text(不需要props)、fragment(不需要props)、element、component为显性创建\r\n * array(不需要props)、alive(不需要props)为隐形创建\r\n*/\r\nexport function renderApi(type: HType, props?: VNodeProps | null, children?: OriginVNode | Array<OriginVNode>): VNode {\r\n  return render(type, props || undefined, children)\r\n}\r\n\r\nexport function render(type: HType, originProps?: VNodeProps, originChildren?: OriginVNode | Array<OriginVNode>): VNode {\r\n  // text的children比较特殊先处理\r\n  if (isText(type)) {\r\n    return renderText(String(originChildren))\r\n  }\r\n\r\n  // 预处理 处理为单个的children\r\n  let originChildrenList: Array<OriginVNode> = []\r\n  if (isArray(originChildren)) originChildrenList.push(...originChildren)\r\n  else originChildrenList.push(originChildren)\r\n  // 创建VNode列表\r\n  let vNodeChildren: Array<VNode> = originChildrenList.map(originChild => createVNode(originChild))\r\n\r\n  // 属性预处理\r\n  let props: VNodeProps = originProps || {}\r\n  handleProps(props)\r\n\r\n  if (isString(type)) return renderElement(type, props , vNodeChildren)\r\n  if (isFragment(type)) return renderFragment(vNodeChildren)\r\n  if (isArrayNode(type)) return renderArrayNode(vNodeChildren)\r\n  if (isFunction(type)) return renderComponent(type, props, vNodeChildren)\r\n  throw '传入参数不合法'\r\n}\r\n\r\n\r\n/**\r\n * 对属性进行预处理\r\n */\r\nfunction handleProps(originProps: VNodeProps): VNodeProps {\r\n  for (const prop in originProps) {\r\n    // 以on开头的事件不需要处理\r\n    if (\r\n        !isOnEvent(prop) &&\r\n        isFunction(originProps[prop])\r\n    ) {\r\n      // 如不为on且为函数则判断为响应式\r\n      originProps[prop] = active(originProps[prop])\r\n    }\r\n  }\r\n\r\n  return originProps\r\n}\r\n\r\nfunction renderText(text: string): VNode {\r\n  return {\r\n    type: TextSymbol,\r\n    flag: VNODE_TYPE.TEXT,\r\n    children: text\r\n  }\r\n}\r\n\r\nfunction renderElement(tag: string, props: Record<string, any>, children: Array<VNode>): VNode {\r\n  return {\r\n    type: tag,\r\n    flag: VNODE_TYPE.ELEMENT,\r\n    props,\r\n    children\r\n  }\r\n}\r\n\r\nfunction renderFragment(children: Array<VNode>): VNode {\r\n  return {\r\n    type: FragmentSymbol,\r\n    flag: VNODE_TYPE.FRAGMENT,\r\n    children\r\n  }\r\n}\r\n\r\nfunction renderArrayNode(children: Array<VNode>): VNode {\r\n  return {\r\n    type: ArraySymbol,\r\n    flag: VNODE_TYPE.ARRAYNODE,\r\n    children\r\n  }\r\n}\r\n\r\nfunction createComponentProps(props: VNodeProps): VNodeProps {\r\n  let componentProps:VNodeProps = {}\r\n  for (const prop in props) {\r\n    let curProp = props[prop]\r\n    if (isActiver(curProp)) {\r\n      Object.defineProperty(componentProps, prop, {\r\n        get() {\r\n          return (curProp as Activer).value\r\n        }\r\n      })\r\n    } else {\r\n      componentProps[prop] = curProp\r\n    }\r\n  }\r\n\r\n  return componentProps\r\n}\r\n\r\n// 渲染一个活跃的节点\r\nfunction renderAlive(activer: Activer): VNode {\r\n  return {\r\n    type: AliveSymbol,\r\n    flag: VNODE_TYPE.ALIVE,\r\n    activer\r\n  }\r\n}\r\n\r\n// 判断是普通函数还是构造函数\r\nfunction renderComponent(component: ComponentType, props: VNodeProps, children: Array<VNode>): VComponent {\r\n  let componentProps = createComponentProps(props)\r\n\r\n  if (\r\n      component.prototype &&\r\n      component.prototype.render &&\r\n      isFunction(component.prototype.render)\r\n  ) {\r\n    let ClassComponent = component as ClassComponentType\r\n    let result = new ClassComponent(componentProps, children)\r\n\r\n    result.props = componentProps\r\n    result.children = children\r\n\r\n    let lifeCycle = createClassComponentLife(result)\r\n\r\n    let vn = result.render(renderApi)\r\n    lifeCycle.emit('created')\r\n    let vc: VComponent = {\r\n      type: VComponentSymbol,\r\n      root: createVNode(vn),\r\n      props: componentProps,\r\n      children: children,\r\n      flag: VNODE_TYPE.COMPONENT,\r\n      lifeStyleInstance: lifeCycle\r\n    }\r\n\r\n    lifeCycle.emit('beforeMounted')\r\n\r\n    return vc\r\n  } else {\r\n    let FunctionComponent = component as FunctionComponentType\r\n    let lifeCycle = new ComponentLifeCycle()\r\n    let vn = FunctionComponent({props: componentProps, children: children, life: lifeCycle, utils: appUtils})\r\n    lifeCycle.emit('created')\r\n    let vc: VComponent =  {\r\n      type: VComponentSymbol,\r\n      root: createVNode(vn),\r\n      props: componentProps,\r\n      children: children,\r\n      flag: VNODE_TYPE.COMPONENT,\r\n      lifeStyleInstance: lifeCycle\r\n    }\r\n\r\n    lifeCycle.emit('beforeMounted')\r\n    return vc\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import {OriginVNode, VNode} from \"../vnode\";\r\nimport {App} from \"../app\";\r\nimport {createVNode} from \"../render\";\r\nimport {\r\n    isVArrayNode,\r\n    isVComponentNode,\r\n    isVElementNode,\r\n    isVFragmentNode\r\n} from \"../utils\";\r\n\r\nexport interface OrderMap {\r\n    [orderProp: string]: {\r\n        propName: string\r\n        handler: OrderHandler\r\n        priority: number\r\n    }\r\n}\r\nexport interface OrderHandlerCtx {\r\n    value: any\r\n    vNode: VNode\r\n}\r\nexport type OrderHandler = (ctx: OrderHandlerCtx) => OriginVNode\r\n\r\n// 初始化所有虚拟dom的指令\r\nexport function renderWithOrder(vNode: VNode, app: App): VNode {\r\n    // if (isVAliveNode(vNode)) {\r\n    //     let preActiver = vNode.activer\r\n    //     vNode.activer = active(()=> renderWithOrder(createVNode(preActiver.value), app))\r\n    // }\r\n\r\n    if (isVComponentNode(vNode)) {\r\n        vNode.root = renderWithOrder(vNode.root, app)\r\n    }\r\n\r\n    if (\r\n        isVElementNode(vNode) ||\r\n        isVFragmentNode(vNode) ||\r\n        isVArrayNode(vNode)\r\n    ) {\r\n        vNode.children = vNode.children.map(node => renderWithOrder(node, app))\r\n    }\r\n\r\n    if (\r\n        isVElementNode(vNode) ||\r\n        isVComponentNode(vNode)\r\n    ) {\r\n        // console.log(vNode)\r\n        // 根据优先级排列\r\n        let orderList = Object.values(app.orderMap).sort((a, b) => b.priority - a.priority)\r\n        return orderList.reduce<VNode>((pre, cur) => {\r\n            if (pre.props && pre.props[cur.propName] != null) {\r\n                let res =  cur.handler({value: pre.props[cur.propName], vNode: pre })\r\n                return createVNode( res === undefined ? pre : res )\r\n            }else {\r\n                return pre\r\n            }\r\n        }, vNode)\r\n    }\r\n\r\n    return vNode\r\n}\r\n\r\nexport function registerOrder(this: App, propName: string, handler: OrderHandler, priority: number = 0) {\r\n    this.orderMap[propName] = {\r\n        handler, priority, propName\r\n    }\r\n}\r\n","import { setActiver } from \"./reactive\"\r\nimport { active, Activer } from './active'\r\nimport { VNode, OriginVNode } from \"../vnode\"\r\nimport {isActiver, isFunction, isVArrayNode} from \"../utils\"\r\nimport { createVNode } from \"../render\"\r\nimport { VAlive } from \"../vnode\"\r\nimport {renderWithOrder} from \"../directive/directive\";\r\nimport {App} from \"../app\";\r\n\r\ntype Meta = {\r\n  targetPropOldValue: any,\r\n  targetPropNewValue: any\r\n}\r\n\r\n/**\r\n * 观察者\r\n * 观察数据的变化\r\n*/\r\nexport class Watcher<T = any> {\r\n  value: T\r\n  callback: (oldValue: T, newValue: T, meta?: Meta) => void\r\n  activeProps: Activer<T>\r\n  depArr?: Array<any> | false\r\n  nextDepArr?: Array<any>\r\n\r\n  constructor(activeProps: Activer<T>, callback: (oldValue: T, newValue: T, meta?: Meta) => void) {\r\n    setActiver(this)\r\n    this.value = activeProps.value\r\n    this.callback = callback\r\n    this.activeProps = activeProps\r\n    setActiver(null)\r\n  }\r\n\r\n  update() {\r\n    let newValue = this.activeProps.value\r\n    let oldValue = this.value\r\n    this.value = newValue\r\n    let meta = { targetPropOldValue: this.depArr, targetPropNewValue: this.nextDepArr }\r\n    this.callback(oldValue, newValue, meta)\r\n    this.depArr = this.nextDepArr?.slice()\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * 监控自定义响应式属性\r\n*/\r\nexport function watch<T = any>(activeProps: (() => T) | Activer<T>, callback: (oldValue: T, newValue: T) => void): Watcher<T> {\r\n  if (!isActiver(activeProps)) activeProps = active(activeProps)\r\n  return new Watcher<T>(activeProps, function (oldValue: T, newValue: T) {\r\n    callback(oldValue, newValue)\r\n  })\r\n}\r\n\r\n/**\r\n * 监控可变状态dom\r\n*/\r\nexport function watchVNode(activeVNode: VAlive, callback: (oldVNode: VNode, newVNode: VNode) => void, app: App): VNode {\r\n  let watcher = new Watcher<OriginVNode>(activeVNode.activer, function (oldValue: OriginVNode, newValue: OriginVNode, meta) {\r\n    const oldVNode = oldValue as VNode\r\n    const newVNode = renderWithOrder(createVNode(ifFunctionToString(newValue)), app)\r\n\r\n\r\n    // 对于数组节点后期需要记录它的响应式数组用于节点更新\r\n    if (isVArrayNode(oldVNode)) {\r\n      oldVNode.depArray = meta?.targetPropOldValue\r\n    }\r\n    // 对于数组节点后期需要记录它的响应式数组用于节点更新\r\n    if (isVArrayNode(newVNode)) {\r\n      newVNode.depArray = meta?.targetPropNewValue\r\n    }\r\n\r\n    callback(oldVNode, newVNode)\r\n    watcher.value = newVNode\r\n    activeVNode.vnode = newVNode\r\n  })\r\n\r\n  return watcher.value = renderWithOrder(createVNode(ifFunctionToString(watcher.value)), app)\r\n}\r\n\r\nfunction ifFunctionToString(value: any): Exclude<any, Function> {\r\n  if (isFunction(value)) {\r\n    console.warn('你确定要返回一个函数到页面？')\r\n    return String(value)\r\n  }\r\n  return value\r\n}\r\n\r\n/**\r\n * 监控可变dom的prop\r\n*/\r\nexport function watchProp(activeProp: Activer, callback: (oldVNode: VNode, newVNode: VNode) => void): any {\r\n  return new Watcher(activeProp, callback).value\r\n}\r\n","import { App } from \"../app\"\r\nimport { watchProp } from \"../reactive\"\r\nimport { isActiver, isOnEvent, isFunction, isObject } from \"../utils\"\r\nimport {VElement, VNodeElement} from \"../vnode\"\r\nimport { mountChildren } from \"./mount\"\r\nimport { patchElementProp } from \"./patch\"\r\n\r\n\r\n\r\nexport function mountElement(vnode: VElement, container: HTMLElement, anchor?: VNodeElement, app?: App) {\r\n\r\n\r\n\r\n  const el = document.createElement(vnode.type)\r\n  vnode.el = el\r\n  mountElementProps(vnode)\r\n  mountChildren(vnode.children, el, undefined, app)\r\n  container.insertBefore(el, anchor!)\r\n}\r\n\r\nexport function unmountElement(vnode: VElement, container: HTMLElement) {\r\n  vnode.el.remove()\r\n}\r\n\r\nexport function mountElementProps(vnode: VElement) {\r\n  let el = vnode.el\r\n  let props = vnode.props\r\n\r\n  // 处理标签属性\r\n  for (let prop in props) {\r\n    let value = props[prop]\r\n    if (isActiver(value)) {\r\n      let firstValue = watchProp(value, (oldValue, newValue) => patchElementProp(oldValue, newValue, el, prop))\r\n      setElementProp(el, prop, firstValue)\r\n    } else {\r\n      setElementProp(el, prop, value)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 处理单个dom属性\r\n*/\r\nexport function setElementProp(el: HTMLElement, prop: string, value: any) {\r\n  if (isOnEvent(prop) && isFunction(value)) {\r\n    let pattern = /^on(.+)$/\r\n    let result = prop.match(pattern)\r\n    result && el.addEventListener(result[1].toLocaleLowerCase(), value.bind(el))\r\n    return\r\n  }\r\n\r\n  switch (prop) {\r\n    case 'className':\r\n      el.className = String(value)\r\n      break\r\n    case 'style':\r\n      if (isObject(value)) {\r\n        value = mergeStyle(value)\r\n      }\r\n    default:\r\n      el.setAttribute(prop, value)\r\n  }\r\n}\r\n\r\n/**\r\n * 将对象形式的style转化为字符串\r\n*/\r\nexport function mergeStyle(style: Record<any, any>): string {\r\n  let styleStringList = []\r\n  for (let cssAttr in style) {\r\n    styleStringList.push(`${cssAttr}:${style[cssAttr]};`)\r\n  }\r\n  return styleStringList.join('')\r\n}\r\n","import {mount, unmount} from \"./mount\";\r\nimport { App } from \"../app\";\r\nimport {VArrayNode} from \"../vnode\";\r\nimport {VText} from \"../vnode\";\r\nimport {VNode, VNODE_TYPE} from \"../vnode\";\r\nimport {setElementProp} from \"./element\";\r\nimport {VComponent} from \"../vnode\";\r\n\r\nexport function isSameVNode(oldVNode: VNode, newVNode: VNode): boolean {\r\n  return oldVNode.flag === newVNode.flag\r\n}\r\n\r\n// todo\r\nexport function getNextSibling(vNode: VNode): ChildNode | null {\r\n  switch (vNode.flag) {\r\n    case VNODE_TYPE.TEXT:\r\n    case VNODE_TYPE.ELEMENT:\r\n    case VNODE_TYPE.ARRAYNODE:\r\n    case VNODE_TYPE.FRAGMENT:\r\n      return vNode.el!.nextSibling\r\n    case VNODE_TYPE.COMPONENT:\r\n      return (vNode as VComponent).root.el!.nextSibling\r\n    case VNODE_TYPE.ALIVE:\r\n      return getNextSibling(vNode.vnode!)\r\n  }\r\n}\r\n\r\nexport function patch(oldVNode: VNode, newVNode: VNode, container: HTMLElement, app?: App): void {\r\n\r\n  // 如果两个节点引用一样不需要判断\r\n  if (oldVNode === newVNode) return\r\n\r\n  // 这里在判断相同类型的节点后可以做进一步优化\r\n  if (isSameVNode(oldVNode, newVNode)) {\r\n    let flag = oldVNode.flag = newVNode.flag\r\n\r\n    if (flag === VNODE_TYPE.TEXT) {\r\n      patchText(<VText>oldVNode, <VText>newVNode, container)\r\n    } else if (flag === VNODE_TYPE.ARRAYNODE) {\r\n      if (app?.options.arrayDiff) {\r\n        patchArrayNodeT(<VArrayNode>oldVNode, <VArrayNode>newVNode, container)\r\n      } else {\r\n        patchArrayNode(<VArrayNode>oldVNode, <VArrayNode>newVNode, container)\r\n      }\r\n    } else {\r\n      // const nextSibling = oldVNode?.el?.nextSibling\r\n      const nextSibling = getNextSibling(oldVNode)\r\n      unmount(oldVNode, container)\r\n      mount(newVNode, container, nextSibling as ChildNode | undefined)\r\n    }\r\n\r\n  } else {\r\n    // const nextSibling = oldVNode?.el?.nextSibling\r\n    const nextSibling = getNextSibling(oldVNode)\r\n    unmount(oldVNode, container)\r\n    mount(newVNode, container, nextSibling as ChildNode | undefined)\r\n  }\r\n\r\n}\r\n\r\nexport function patchText(oldVNode: VText, newVNode: VText, container: HTMLElement) {\r\n  oldVNode.el!.nodeValue = newVNode.children\r\n  newVNode.el = oldVNode.el\r\n}\r\n\r\nexport function patchElementProp(oldValue: any, newValue: any, el: HTMLElement, prop: string) {\r\n  setElementProp(el, prop, newValue)\r\n}\r\n\r\nexport function patchArrayNodeT(oldVNode: VArrayNode, newVNode: VArrayNode, container: HTMLElement) {\r\n  if (!oldVNode.depArray) {\r\n    patchArrayNode(oldVNode, newVNode, container)\r\n    return\r\n  }\r\n\r\n  const oldDepArray = oldVNode.depArray\r\n  const newDepArray = newVNode.depArray\r\n  const oldChildren = oldVNode.children\r\n  const newChildren = newVNode.children\r\n\r\n  if (!oldDepArray.length || !newDepArray.length) {\r\n    patchArrayNode(oldVNode, newVNode, container)\r\n    return\r\n  }\r\n\r\n  newVNode.anchor = oldVNode.anchor\r\n  newVNode.el = oldVNode.el\r\n\r\n  type NodeInfo = { node: VNode, index: number, used: boolean }\r\n  // 为映射做初始化\r\n  let map = new Map<any, Array<NodeInfo>>()\r\n  oldDepArray.forEach((item, index) => {\r\n    let arr = map.get(item)\r\n    if (!arr) map.set(item, arr = [])\r\n    arr.push({ node: oldChildren[index], index, used: false })\r\n  })\r\n\r\n  let getOld = (item: any) => {\r\n    let arr = map.get(item)\r\n    if (!arr) return false\r\n\r\n    let index = arr.findIndex(alone => !alone.used)\r\n\r\n    if (index > -1) return arr[index]\r\n    else return false\r\n  }\r\n\r\n  let moveOld = (item: any, node: NodeInfo) => {\r\n    let arr = map.get(item)\r\n    if (!arr) return\r\n\r\n    let index = arr.findIndex(alone => alone === node)\r\n    arr.splice(index, 1)\r\n  }\r\n\r\n  let maxIndexSoFar = { node: oldChildren[0], index: 0 }\r\n\r\n  newDepArray.forEach((item, newIndex) => {\r\n    let old = getOld(item)\r\n    if (old) {\r\n      if (old.index < maxIndexSoFar.index) {\r\n        let next: ChildNode | null\r\n        if (newIndex > 0) {\r\n          next = getNextSibling(newChildren[newIndex - 1]) as ChildNode | null\r\n        } else {\r\n          next = getNextSibling(maxIndexSoFar.node) as ChildNode | null\r\n        }\r\n\r\n        VNodeInsertBefore(container, old.node, next as ChildNode | undefined)\r\n        // container.insertBefore(old.node.el!, next)\r\n      } else {\r\n        maxIndexSoFar = old\r\n      }\r\n\r\n      newChildren[newIndex] = old.node\r\n      moveOld(item, old)\r\n    } else {\r\n      // let next = maxIndexSoFar.node.el!.nextSibling\r\n      let next: ChildNode | null\r\n      if (newIndex > 0) {\r\n        next = getNextSibling(newChildren[newIndex - 1]) as ChildNode | null\r\n      } else {\r\n        next = getNextSibling(maxIndexSoFar.node) as ChildNode | null\r\n      }\r\n\r\n      let newNode = newChildren[newIndex]\r\n      mount(newNode, container, next as HTMLElement | undefined)\r\n      // maxIndexSoFar = { node: newNode, index: maxIndexSoFar.index + 1 }\r\n    }\r\n  })\r\n\r\n\r\n  map.forEach(value => {\r\n    value.forEach(item => {\r\n      if (!item.used) {\r\n        unmount(item.node, container)\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nfunction patchArrayNode(oldVNode: VArrayNode, newVNode: VArrayNode, container: HTMLElement) {\r\n  const nextSibling = oldVNode.el.nextSibling\r\n  unmount(oldVNode, container)\r\n  mount(newVNode, container, nextSibling as ChildNode | undefined)\r\n}\r\n\r\n\r\n/**\r\n * 将一个虚拟节点挂载到一个锚点前面\r\n */\r\nfunction VNodeInsertBefore(container: HTMLElement, node: VNode, next?: ChildNode) {\r\n  if (node.flag === VNODE_TYPE.ELEMENT || node.flag === VNODE_TYPE.TEXT) {\r\n    container.insertBefore(node.el!, next!)\r\n  } else if (node.flag === VNODE_TYPE.COMPONENT) {\r\n    container.insertBefore((node as VComponent).root.el!, next!)\r\n  }\r\n  else if (node.flag === VNODE_TYPE.ARRAYNODE || node.flag === VNODE_TYPE.FRAGMENT) {\r\n    let start: ChildNode | null | undefined = node.anchor\r\n    let nextToMove = start?.nextSibling\r\n    let end: ChildNode | null | undefined = node.el\r\n    while (start !== end) {\r\n      container.insertBefore(start!, next!)\r\n      start = nextToMove\r\n      nextToMove = start?.nextSibling\r\n    }\r\n    container.insertBefore(end!, next!)\r\n  }\r\n}\r\n","import { patch } from \"./patch\";\r\nimport { watchVNode } from \"../reactive\";\r\nimport { App } from \"../app\";\r\nimport {\r\n  VAlive,\r\n  VArrayNode,\r\n  VComponent,\r\n  VFragment,\r\n  VNodeElement,\r\n  VText\r\n} from \"../vnode\";\r\nimport { VNode } from \"../vnode\";\r\nimport { mountElement, unmountElement } from \"./element\";\r\nimport {\r\n  isVAliveNode,\r\n  isVArrayNode,\r\n  isVComponentNode,\r\n  isVElementNode,\r\n  isVFragmentNode,\r\n  isVTextNode\r\n} from \"../utils\";\r\n\r\n\r\nexport function mount(vNode: VNode, container: HTMLElement, anchor?: VNodeElement, app?: App) {\r\n  if (isVElementNode(vNode)) {\r\n    mountElement(vNode, container, anchor, app)\r\n  } else if (isVTextNode(vNode)) {\r\n    mountText(vNode, container, anchor)\r\n  } else if (isVFragmentNode(vNode)) {\r\n    mountFragment(vNode, container, anchor, app)\r\n  } else if (isVArrayNode(vNode)) {\r\n    mountArrayNode(vNode, container, anchor, app)\r\n  } else if (isVComponentNode(vNode)) {\r\n    mountComponent(vNode, container, anchor, app)\r\n  } else if (isVAliveNode(vNode)) {\r\n    mountAlive(vNode, container, anchor, app)\r\n  } else {\r\n    throw '传入的节点不合法！'\r\n  }\r\n}\r\n\r\nexport function unmount(vNode: VNode, container: HTMLElement) {\r\n  if (isVElementNode(vNode)) {\r\n    unmountElement(vNode, container)\r\n  } else if (isVTextNode(vNode)) {\r\n    unmountText(vNode, container)\r\n  } else if (isVFragmentNode(vNode)) {\r\n    unmountFragment(vNode, container)\r\n  } else if (isVArrayNode(vNode)) {\r\n    unmountArrayNode(vNode, container)\r\n  } else if (isVComponentNode(vNode)) {\r\n    unmountComponent(vNode, container)\r\n  } else {\r\n    throw '传入的节点不合法！'\r\n  }\r\n}\r\n\r\nexport function mountChildren(children: Array<VNode>, container: HTMLElement, anchor?: VNodeElement, app?: App) {\r\n  children.forEach(child => mount(child, container, anchor, app))\r\n}\r\n\r\nexport function mountText(vNode: VText, container: HTMLElement, anchor?: VNodeElement) {\r\n  const el = document.createTextNode(vNode.children)\r\n  vNode.el = el\r\n  container.insertBefore(el, anchor!)\r\n}\r\n\r\nexport function unmountText(vNode: VText, container: HTMLElement) {\r\n  vNode.el.remove()\r\n}\r\n\r\nexport function mountFragment(vNode: VFragment, container: HTMLElement, anchor?: VNodeElement, app?: App) {\r\n  const start = document.createTextNode('')\r\n  const end = document.createTextNode('')\r\n  vNode.anchor = start\r\n  vNode.el = end\r\n  container.insertBefore(start, anchor!)\r\n  mountChildren(vNode.children, container, anchor, app)\r\n  container.insertBefore(end, anchor!)\r\n}\r\n\r\nexport function unmountFragment(vNode: VFragment, container: HTMLElement) {\r\n  const start = vNode.anchor\r\n  const end = vNode.el\r\n  let cur: ChildNode | null = start\r\n  while (cur && cur !== end) {\r\n    let next: ChildNode | null = cur.nextSibling\r\n    cur.remove()\r\n    cur = next\r\n  }\r\n  end.remove()\r\n}\r\n\r\nexport function mountArrayNode(vNode: VArrayNode, container: HTMLElement, anchor?: VNodeElement, app?: App) {\r\n  const start = document.createTextNode('')\r\n  const end = document.createTextNode('')\r\n  vNode.anchor = start\r\n  vNode.el = end\r\n  container.insertBefore(start, anchor!)\r\n  mountChildren(vNode.children, container, anchor, app)\r\n  container.insertBefore(end, anchor!)\r\n}\r\n\r\nexport function unmountArrayNode(vNode: VArrayNode, container: HTMLElement, anchor?: HTMLElement) {\r\n  const start = vNode.anchor\r\n  const end = vNode.el\r\n  let cur: ChildNode | null = start\r\n  while (cur && cur !== end) {\r\n    let next: ChildNode | null = cur.nextSibling\r\n    cur.remove()\r\n    cur = next\r\n  }\r\n  end.remove()\r\n}\r\n\r\nexport function mountComponent(vNode: VComponent, container: HTMLElement, anchor?: VNodeElement, app?: App) {\r\n  const root = vNode.root\r\n  vNode.lifeStyleInstance.emit('readyMounted')\r\n  mount(root, container, anchor, app)\r\n  vNode.lifeStyleInstance.emit('mounted')\r\n}\r\n\r\nexport function unmountComponent(vNode: VComponent, container: HTMLElement) {\r\n  vNode.lifeStyleInstance.emit('beforeUnMounted')\r\n  unmount(vNode.root, container)\r\n  vNode.lifeStyleInstance.emit('unMounted')\r\n}\r\n\r\nexport function mountAlive(vNode: VAlive, container: HTMLElement, anchor?: VNodeElement, app?: App) {\r\n  let firstVNode = watchVNode(vNode, (oldVNode, newVNode) => patch(oldVNode, newVNode, container, app), app!)\r\n  vNode.vnode = firstVNode\r\n  mount(firstVNode, container, anchor, app)\r\n}\r\n","import { H } from './render'\r\nimport { VNode, VNodeProps, OriginVNode, FunctionComponentType } from \"./vnode\"\r\nimport {appUtils, AppUtils} from \"./plugin\";\r\nimport {ComponentLifeCycle} from \"./lifeCycle\";\r\n\r\n\r\n/**\r\n * 根类组件用于类型提示\r\n * 抽象类\r\n*/\r\n\r\n// todo\r\nexport interface ComponentInstance {\r\n  props?: VNodeProps\r\n  children?: Array<OriginVNode>\r\n  utils: AppUtils\r\n  life?: ComponentLifeCycle\r\n  render(h?: H): OriginVNode\r\n\r\n  /** 组件示例创建之后触发 */\r\n  created?(): void\r\n\r\n  /** 组件示例在渲染之前触发(DOM还没有生成) */\r\n  beforeMounted?(): void\r\n\r\n  /** dom已经生成到js内存但还没挂载 */\r\n  readyMounted?(): void\r\n\r\n  /** dom挂载到了页面上*/\r\n  mounted?(): void\r\n\r\n  /** 卸载之前触发 */\r\n  beforeUnMounted?():void\r\n\r\n  /** 卸载之后触发 */\r\n  unMounted?():void\r\n}\r\n\r\nexport abstract class Component implements ComponentInstance{\r\n  // 组件属性\r\n  abstract props?: VNodeProps\r\n  // 组件子元素\r\n  abstract children?: Array<OriginVNode>\r\n\r\n  abstract render(h?: H): VNode\r\n\r\n  utils: AppUtils = appUtils\r\n  abstract life?: ComponentLifeCycle\r\n\r\n  /** 组件示例创建之后触发 */\r\n  abstract created?(): void\r\n\r\n  /** 组件示例在渲染之前触发(DOM还没有生成) */\r\n  abstract beforeMounted?(): void\r\n\r\n  /** dom已经生成到js内存但还没挂载 */\r\n  abstract readyMounted?(): void\r\n\r\n  /** dom挂载到了页面上*/\r\n  abstract mounted?(): void\r\n\r\n  /** 卸载之前触发 */\r\n  abstract beforeUnMounted?():void\r\n\r\n  /** 卸载之后触发 */\r\n  abstract unMounted?():void\r\n}\r\n\r\nexport function defineComponent(componentType: FunctionComponentType): FunctionComponentType {\r\n  return componentType\r\n}\r\n","import {App} from \"../../app\";\r\nimport {isActiver, isObjectExact, isArray} from \"../../utils\";\r\n\r\n// 自定义处理className的指令\r\nexport function orderClassName(app: App) {\r\n    app.order('className', function ({value, vNode}) {\r\n        let className = vNode.props!['className']\r\n        if(isActiver(className)) {\r\n            let preCall =  className.callback\r\n            className.callback = () => {\r\n                let value = preCall()\r\n                if (isObjectExact(value)) {\r\n                    return handleObject(value)\r\n                } else if (isArray(value)) {\r\n                    return handleArray(value)\r\n                } else {\r\n                    return value\r\n                }\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction handleObject(value: Record<string, boolean>): string {\r\n    let names = []\r\n    for (let p in value) {\r\n        if(value[p]) names.push(p)\r\n    }\r\n\r\n    return names.join(' ')\r\n}\r\n\r\nfunction handleArray(value: Array<string>): string {\r\n    return value.join(' ')\r\n}\r\n","import { mount } from \"./runtime/mount\";\r\nimport { VNode } from \"./vnode\";\r\nimport {isString, isFunction} from \"./utils\";\r\nimport { AppPluginType, appUtils } from './plugin'\r\nimport {OrderHandler, OrderMap, registerOrder, renderWithOrder} from './directive/directive'\r\nimport {orderClassName} from \"./directive/preset/className\";\r\n\r\nexport interface Options {\r\n  arrayDiff?: boolean\r\n}\r\n\r\nexport class App {\r\n  rootVNode: VNode\r\n  options: Options\r\n\r\n  private pluginList: Array<AppPluginType>\r\n  orderMap:OrderMap\r\n\r\n  constructor(vNode: VNode, options?: Options) {\r\n    this.rootVNode = vNode\r\n    this.options = options || {}\r\n    this.pluginList = []\r\n    this.orderMap = {}\r\n    this._init()\r\n  }\r\n\r\n  private _init() {\r\n    orderClassName(this)\r\n  }\r\n\r\n  mount(selector?: string | HTMLElement): void {\r\n    if(selector) {\r\n      const el =  (isString(selector) ? document.querySelector(selector) : selector) || document.body\r\n      mount(renderWithOrder(this.rootVNode, this), el as HTMLElement, undefined, this)\r\n    }else {\r\n      mount(renderWithOrder(this.rootVNode, this), document.body, undefined, this)\r\n    }\r\n\r\n    // let container = document.createElement('div')\r\n    // runtime(this.rootVNode, container, undefined, this)\r\n    // el?.replaceWith(...container.childNodes)\r\n  }\r\n\r\n  use(plugin: AppPluginType) {\r\n    let index = this.pluginList.indexOf(plugin)\r\n    if(index > -1) return this\r\n\r\n    const ctx = {app: this, utils: appUtils}\r\n\r\n    if (isFunction(plugin)) {\r\n      plugin(ctx)\r\n    } else {\r\n      plugin.install(ctx)\r\n    }\r\n    this.pluginList.push(plugin)\r\n    return this\r\n  }\r\n\r\n  order(propName: string, handler: OrderHandler, priority?: number) {\r\n    registerOrder.call(this, propName, handler, priority)\r\n    return this\r\n  }\r\n}\r\n\r\nexport function createApp(vNode: VNode, options?: Options): App {\r\n  return new App(vNode, options)\r\n}\r\n\r\n"],"names":["h"],"mappings":";;;;MAGa,UAAU,GAAG,MAAM,CAAC,MAAM;;MCD1B,cAAc,GAAG,MAAM,CAAC,UAAU;;MCsBlC,gBAAgB,GAAG,MAAM,CAAC,YAAY;;MCtBtC,WAAW,GAAG,MAAM,CAAC,WAAW;;ACCtC,MAAM,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC;;ACA1C;;AAEE;AACF,IAAY,UASX,CAAA;AATD,CAAA,UAAY,UAAU,EAAA;;AAEpB,IAAA,UAAA,CAAA,UAAA,CAAA,SAAA,CAAA,GAAA,CAAA,CAAA,GAAA,SAAO,CAAA;;AAEP,IAAA,UAAA,CAAA,UAAA,CAAA,MAAA,CAAA,GAAA,CAAA,CAAA,GAAA,MAAI,CAAA;AACJ,IAAA,UAAA,CAAA,UAAA,CAAA,UAAA,CAAA,GAAA,CAAA,CAAA,GAAA,UAAQ,CAAA;AACR,IAAA,UAAA,CAAA,UAAA,CAAA,WAAA,CAAA,GAAA,CAAA,CAAA,GAAA,WAAS,CAAA;AACT,IAAA,UAAA,CAAA,UAAA,CAAA,WAAA,CAAA,GAAA,CAAA,CAAA,GAAA,WAAS,CAAA;AACT,IAAA,UAAA,CAAA,UAAA,CAAA,OAAA,CAAA,GAAA,CAAA,CAAA,GAAA,OAAK,CAAA;AACP,CAAC,EATW,UAAU,KAAV,UAAU,GASrB,EAAA,CAAA,CAAA;;ACFK,SAAU,QAAQ,CAAC,OAAgB,EAAA;AACvC,IAAA,OAAO,OAAO,OAAO,KAAK,QAAQ,CAAA;AACpC,CAAC;AAEK,SAAU,UAAU,CAAC,OAAgB,EAAA;AACzC,IAAA,OAAO,OAAO,OAAO,KAAK,UAAU,CAAA;AACtC,CAAC;AAEK,SAAU,UAAU,CAAC,OAAgB,EAAA;IACzC,OAAO,OAAO,KAAK,cAAc,CAAA;AACnC,CAAC;AAEK,SAAU,WAAW,CAAC,OAAgB,EAAA;IAC1C,OAAO,OAAO,KAAK,WAAW,CAAA;AAChC,CAAC;AAEK,SAAU,MAAM,CAAC,OAAgB,EAAA;IACrC,OAAO,OAAO,KAAK,UAAU,CAAA;AAC/B,CAAC;AAEK,SAAU,SAAS,CAAC,OAAgB,EAAA;IACxC,OAAO,QAAQ,CAAC,OAAO,CAAC,IAAK,OAA4B,CAAC,IAAI,KAAK,SAAS,CAAA;AAC9E,CAAC;AAEK,SAAU,OAAO,CAAC,OAAgB,EAAA;IACtC,OAAO,QAAQ,CAAC,OAAO,CAAC,IAAK,OAA4B,CAAC,IAAI,IAAI,UAAU,CAAA;AAC9E,CAAC;AAEK,SAAU,aAAa,CAAC,OAAgB,EAAA;IAC5C,OAAO,QAAQ,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,WAAW,KAAK,MAAM,CAAA;AAC5D,CAAC;AAEK,SAAU,SAAS,CAAC,GAAW,EAAA;AACnC,IAAA,OAAO,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;AAC3B,CAAC;AAEK,SAAU,QAAQ,CAAC,OAAgB,EAAA;IACvC,OAAO,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,KAAK,IAAI,CAAA;AACxD,CAAC;AAGK,SAAU,OAAO,CAAC,OAAgB,EAAA;AACtC,IAAA,OAAO,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,CAAA;AAC/B,CAAC;AAED;AACM,SAAU,YAAY,CAAC,IAAW,EAAA;AACtC,IAAA,OAAO,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,SAAS,CAAA;AAC3C,CAAC;AACK,SAAU,WAAW,CAAC,IAAW,EAAA;AACrC,IAAA,OAAO,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,IAAI,CAAA;AACtC,CAAC;AACK,SAAU,cAAc,CAAC,IAAW,EAAA;AACxC,IAAA,OAAO,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,OAAO,CAAA;AACzC,CAAC;AACK,SAAU,eAAe,CAAC,IAAW,EAAA;AACzC,IAAA,OAAO,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,QAAQ,CAAA;AAC1C,CAAC;AACK,SAAU,gBAAgB,CAAC,IAAW,EAAA;AAC1C,IAAA,OAAO,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,SAAS,CAAA;AAC3C,CAAC;AACK,SAAU,YAAY,CAAC,IAAW,EAAA;AACtC,IAAA,OAAO,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,KAAK,CAAA;AACvC;;AC1EA,IAAI,QAAQ,GAAG,KAAK,CAAA;AACpB,MAAM,WAAW,GAAmB,EAAE,CAAA;AAEhC,SAAU,SAAS,CAAC,OAAgB,EAAA;IACxC,IAAI,KAAK,GAAW,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,CAAA;AAChD,IAAA,IAAI,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;AAAE,QAAA,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;IAC5C,IAAI,CAAC,QAAQ,EAAE;QACb,QAAQ,GAAG,IAAI,CAAA;QACf,OAAO,CAAC,OAAO,EAAE;aACd,IAAI,CAAC,MAAK;YACT,IAAI,OAAO,GAAwB,SAAS,CAAA;AAC5C,YAAA,OAAO,OAAO,GAAG,WAAW,CAAC,KAAK,EAAE,EAAE;gBACpC,OAAO,CAAC,MAAM,EAAE,CAAA;AACjB,aAAA;AACH,SAAC,CAAC,CAAC,OAAO,CAAC,MAAK;YACd,QAAQ,GAAG,KAAK,CAAA;AAClB,SAAC,CAAC,CAAA;AACL,KAAA;AACH;;AChBA;AACA,MAAM,SAAS,GAAG,IAAI,OAAO,EAAE,CAAA;AAC/B;AACA,IAAI,aAAa,GAAmB,IAAI,CAAA;AACxC,MAAM,QAAQ,GAAG,MAAM,CAAC,UAAU,CAAC,CAAA;AAEnC;;AAEE;AACI,SAAU,QAAQ,CAAyC,MAAS,EAAA;IACxE,IAAI,MAAM,CAAC,QAAQ,CAAC;AAAE,QAAA,OAAO,MAAM,CAAA;AAEnC,IAAA,IAAI,OAAO,GAAoB;AAC7B,QAAA,GAAG,CAAC,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAA;YACxB,IAAI,IAAI,KAAK,QAAQ;AAAE,gBAAA,OAAO,IAAI,CAAA;AAClC,YAAA,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAA;YAE/C,IAAI,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;AACvC,gBAAA,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAA;AACrB,aAAA;AAED,YAAA,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;AACtB,gBAAA,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAA;gBACnB,OAAO,aAAa,CAAC,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,CAAA;AACxC,aAAA;AAED,YAAA,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAA;AACnB,YAAA,OAAO,GAAG,CAAA;SACX;AAED,QAAA,GAAG,CAAC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAA;AAC/B,YAAA,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAA;AACtD,YAAA,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAA;AACrB,YAAA,OAAO,GAAG,CAAA;SACX;KACF,CAAA;AAED,IAAA,OAAO,IAAI,KAAK,CAAC,MAAM,EAAE,OAAO,CAAC,CAAA;AACnC,CAAC;AAED;;AAEE;AACF,SAAS,aAAa,CAAC,SAAqB,EAAE,SAA2B,EAAE,OAAwB,EAAA;AACjG,IAAA,IAAI,OAAO,GAAmC;AAC5C,QAAA,GAAG,CAAC,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAA;AACxB,YAAA,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAA;AAE/C,YAAA,IAAI,aAAa,CAAC,GAAG,CAAC,EAAE;AACtB,gBAAA,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAA;AACrB,aAAA;AAED,YAAA,OAAO,GAAG,CAAA;SACX;AACD,QAAA,GAAG,CAAC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAA;AAC/B,YAAA,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAA;AACtD,YAAA,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,CAAA;AAC3B,YAAA,OAAO,GAAG,CAAA;SACX;KACF,CAAA;AAED,IAAA,OAAO,IAAI,KAAK,CAAC,SAAS,EAAE,OAAO,CAAC,CAAA;AACtC,CAAC;AAED;;AAEE;AACc,SAAA,OAAO,CAAC,MAAoC,EAAE,IAAqB,EAAA;IACjF,IAAI,OAAO,GAA4C,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;AAC5E,IAAA,IAAI,CAAC,OAAO;QAAE,OAAM;AAEpB,IAAA,IAAI,WAAW,GAAmB,OAAO,CAAC,IAAI,CAAC,CAAA;AAC/C,IAAA,IAAI,CAAC,WAAW;QAAE,OAAM;;AAGxB,IAAA,WAAW,CAAC,OAAO,CAAC,OAAO,IAAG;;AAE5B,QAAA,IAAI,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,EAAE;AACzB,YAAA,OAAO,CAAC,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,CAAA;AAClC,SAAA;QACD,SAAS,CAAC,OAAO,CAAC,CAAA;AACpB,KAAC,CAAC,CAAA;AACJ,CAAC;AAED;;AAEE;AACc,SAAA,KAAK,CAAC,MAAoC,EAAE,IAAqB,EAAA;AAC/E,IAAA,IAAI,CAAC,aAAa;QAAE,OAAM;IAE1B,IAAI,OAAO,GAA4C,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;AAC5E,IAAA,IAAI,CAAC,OAAO;QAAE,SAAS,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,GAAG,EAAE,CAAC,CAAA;AAEjD,IAAA,IAAI,WAAW,GAAmB,OAAO,CAAC,IAAI,CAAC,CAAA;AAC/C,IAAA,IAAI,CAAC,WAAW;AAAE,QAAA,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,CAAA;;AAGlD,IAAA,IAAI,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,EAAE;QACzB,IAAI,aAAa,CAAC,MAAM,EAAE;AACxB,YAAA,aAAa,CAAC,MAAM,GAAG,KAAK,CAAA;AAC7B,SAAA;AAAM,aAAA;AACL,YAAA,IAAI,aAAa,CAAC,MAAM,KAAK,SAAS,EAAE;gBACtC,aAAa,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,CAAA;AAC5C,aAAA;AACF,SAAA;AACF,KAAA;AAED,IAAA,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,CAAA;AACjC,CAAC;AAED;AACM,SAAU,UAAU,CAAC,EAAkB,EAAA;IAC3C,aAAa,GAAG,EAAE,CAAA;AACpB,CAAC;AACD;SACgB,UAAU,GAAA;AACxB,IAAA,OAAO,aAAa,CAAA;AACtB;;MCvHa,OAAO,CAAA;AAIlB,IAAA,WAAA,CAAY,KAAQ,EAAA;AAClB,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;QACnB,IAAI,CAAC,OAAO,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,CAAA;KACtC;AAED,IAAA,IAAI,KAAK,GAAA;AACP,QAAA,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAA;QAC5B,OAAO,IAAI,CAAC,MAAM,CAAA;KACnB;IAED,IAAI,KAAK,CAAC,KAAK,EAAA;AACb,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;QACnB,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAA;AAChC,QAAA,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAA;KAC/B;AACF,CAAA;AAGK,SAAU,GAAG,CAAgB,KAAQ,EAAA;AACzC,IAAA,OAAO,IAAI,OAAO,CAAC,KAAK,CAAC,CAAA;AAC3B;;ACtBM,SAAU,KAAK,CAAgB,KAAQ,EAAA;AAC3C,IAAA,OAAO,GAAG,CAAC,KAAK,CAAC,CAAA;AACnB,CAAC;AAEK,SAAU,WAAW,CAAyC,MAAS,EAAA;AAC3E,IAAA,OAAO,QAAQ,CAAC,MAAM,CAAC,CAAA;AACzB;;ACTA;;AAEE;MACW,OAAO,CAAA;AAIlB,IAAA,WAAA,CAAY,EAAW,EAAA;QAFvB,IAAI,CAAA,IAAA,GAAW,SAAS,CAAA;AAGtB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAA;KACnB;AAED,IAAA,IAAI,KAAK,GAAA;AACP,QAAA,OAAO,IAAI,CAAC,QAAQ,EAAE,CAAA;KACvB;AACF,CAAA;AAED;;AAEE;AACI,SAAU,MAAM,CAAgB,EAAW,EAAA;AAC/C,IAAA,OAAO,IAAI,OAAO,CAAC,EAAE,CAAC,CAAA;AACxB;;MCWa,kBAAkB,CAAA;AAG3B,IAAA,WAAA,CACqB,cAAiC,EAAE,EACnC,iBAAuC,GAAA,EAAE,EACzC,gBAAsC,GAAA,EAAE,EACxC,WAAA,GAAiC,EAAE,EACnC,mBAAA,GAAyC,EAAE,EAC3C,gBAAmC,EAAE,EAAA;QALrC,IAAW,CAAA,WAAA,GAAX,WAAW,CAAwB;QACnC,IAAiB,CAAA,iBAAA,GAAjB,iBAAiB,CAAwB;QACzC,IAAgB,CAAA,gBAAA,GAAhB,gBAAgB,CAAwB;QACxC,IAAW,CAAA,WAAA,GAAX,WAAW,CAAwB;QACnC,IAAmB,CAAA,mBAAA,GAAnB,mBAAmB,CAAwB;QAC3C,IAAa,CAAA,aAAA,GAAb,aAAa,CAAwB;;;;;;;KAQzD;AAED,IAAA,OAAO,CAAC,EAAc,EAAA;AAClB,QAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;KAC5B;AAED,IAAA,aAAa,CAAC,EAAc,EAAA;AACxB,QAAA,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;KAClC;AAED,IAAA,YAAY,CAAC,EAAc,EAAA;AACvB,QAAA,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;KACjC;AAED,IAAA,OAAO,CAAC,EAAc,EAAA;AAClB,QAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;KAC5B;AAED,IAAA,eAAe,CAAC,EAAc,EAAA;AAC1B,QAAA,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;KACpC;AAED,IAAA,SAAS,CAAC,EAAc,EAAA;AACpB,QAAA,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;KAC9B;AAED,IAAA,IAAI,CAAC,QAA0C,EAAA;AAC3C,QAAA,IAAI,CAAC,CAAA,EAAG,QAAQ,CAAA,IAAA,CAAM,CAAC,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,CAAA;KAC9C;AAEJ,CAAA;AAED;AACM,SAAU,wBAAwB,CAAC,SAA4B,EAAA;AACjE,IAAA,IAAI,SAAS,GAOT,CAAC,SAAS,EAAE,eAAe,EAAE,cAAc,EAAE,SAAS,EAAE,iBAAiB,EAAE,WAAW,CAAC,CAAA;AAE3F,IAAA,IAAI,SAAS,GAAG,IAAI,kBAAkB,EAAE,CAAA;AACxC,IAAA,SAAS,CAAC,IAAI,GAAG,SAAS,CAAA;AAE1B,IAAA,SAAS,CAAC,OAAO,CAAC,QAAQ,IAAG;AACzB,QAAA,IAAI,EAAE,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAA;AAC5B,QAAA,IAAG,CAAC,EAAE;YAAE,OAAM;QACd,SAAS,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAA;AAC3C,KAAC,CAAC,CAAA;AAEF,IAAA,OAAO,SAAS,CAAA;AACpB;;AC7CA;AACO,MAAM,QAAQ,GAAa;IAC9B,KAAK;IACL,WAAW;OACXA,SAAC;IACD,KAAK;IACL,MAAM;IAEN,SAAS;IACT,YAAY;IACZ,OAAO;IACP,eAAe;IACf,cAAc;IACd,WAAW;IACX,gBAAgB;IAChB,YAAY;CACf;;AChCD;;;;;;AAME;AACI,SAAU,WAAW,CAAC,WAAwB,EAAA;IAClD,IAAI,OAAO,CAAC,WAAW,CAAC;AAAE,QAAA,OAAO,WAAW,CAAA;IAE5C,IAAI,UAAU,CAAC,WAAW,CAAC;AAAE,QAAA,OAAO,WAAW,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAA;SAC/D,IAAI,SAAS,CAAC,WAAW,CAAC;AAAE,QAAA,OAAO,WAAW,CAAC,WAAW,CAAC,CAAA;SAC3D,IAAI,QAAQ,CAAC,WAAW,CAAC;AAAE,QAAA,OAAO,UAAU,CAAC,WAAW,CAAC,CAAA;SACzD,IAAI,OAAO,CAAC,WAAW,CAAC;AAAE,QAAA,OAAO,eAAe,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AAC5F,SAAA;;QAEH,IAAI,KAAK,GAAG,WAAW,CAAA;AACvB,QAAA,IAAI,OAAc,CAAA;AAClB,QAAA,IAAI,CAAC,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ;AAAE,YAAA,OAAO,GAAG,UAAU,CAAC,EAAE,CAAC,CAAA;;YAC5D,OAAO,GAAG,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAA;AACxC,QAAA,OAAO,OAAO,CAAA;AACf,KAAA;AACH,CAAC;AAGD;;;AAGE;SACc,SAAS,CAAC,IAAW,EAAE,KAAyB,EAAE,QAA2C,EAAA;IAC3G,OAAO,MAAM,CAAC,IAAI,EAAE,KAAK,IAAI,SAAS,EAAE,QAAQ,CAAC,CAAA;AACnD,CAAC;SAEe,MAAM,CAAC,IAAW,EAAE,WAAwB,EAAE,cAAiD,EAAA;;AAE7G,IAAA,IAAI,MAAM,CAAC,IAAI,CAAC,EAAE;AAChB,QAAA,OAAO,UAAU,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAA;AAC1C,KAAA;;IAGD,IAAI,kBAAkB,GAAuB,EAAE,CAAA;IAC/C,IAAI,OAAO,CAAC,cAAc,CAAC;AAAE,QAAA,kBAAkB,CAAC,IAAI,CAAC,GAAG,cAAc,CAAC,CAAA;;AAClE,QAAA,kBAAkB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAA;;AAE5C,IAAA,IAAI,aAAa,GAAiB,kBAAkB,CAAC,GAAG,CAAC,WAAW,IAAI,WAAW,CAAC,WAAW,CAAC,CAAC,CAAA;;AAGjG,IAAA,IAAI,KAAK,GAAe,WAAW,IAAI,EAAE,CAAA;IACzC,WAAW,CAAC,KAAK,CAAC,CAAA;IAElB,IAAI,QAAQ,CAAC,IAAI,CAAC;QAAE,OAAO,aAAa,CAAC,IAAI,EAAE,KAAK,EAAG,aAAa,CAAC,CAAA;IACrE,IAAI,UAAU,CAAC,IAAI,CAAC;AAAE,QAAA,OAAO,cAAc,CAAC,aAAa,CAAC,CAAA;IAC1D,IAAI,WAAW,CAAC,IAAI,CAAC;AAAE,QAAA,OAAO,eAAe,CAAC,aAAa,CAAC,CAAA;IAC5D,IAAI,UAAU,CAAC,IAAI,CAAC;QAAE,OAAO,eAAe,CAAC,IAAI,EAAE,KAAK,EAAE,aAAa,CAAC,CAAA;AACxE,IAAA,MAAM,SAAS,CAAA;AACjB,CAAC;AAGD;;AAEG;AACH,SAAS,WAAW,CAAC,WAAuB,EAAA;AAC1C,IAAA,KAAK,MAAM,IAAI,IAAI,WAAW,EAAE;;AAE9B,QAAA,IACI,CAAC,SAAS,CAAC,IAAI,CAAC;AAChB,YAAA,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,EAC/B;;YAEA,WAAW,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAA;AAC9C,SAAA;AACF,KAAA;AAED,IAAA,OAAO,WAAW,CAAA;AACpB,CAAC;AAED,SAAS,UAAU,CAAC,IAAY,EAAA;IAC9B,OAAO;AACL,QAAA,IAAI,EAAE,UAAU;QAChB,IAAI,EAAE,UAAU,CAAC,IAAI;AACrB,QAAA,QAAQ,EAAE,IAAI;KACf,CAAA;AACH,CAAC;AAED,SAAS,aAAa,CAAC,GAAW,EAAE,KAA0B,EAAE,QAAsB,EAAA;IACpF,OAAO;AACL,QAAA,IAAI,EAAE,GAAG;QACT,IAAI,EAAE,UAAU,CAAC,OAAO;QACxB,KAAK;QACL,QAAQ;KACT,CAAA;AACH,CAAC;AAED,SAAS,cAAc,CAAC,QAAsB,EAAA;IAC5C,OAAO;AACL,QAAA,IAAI,EAAE,cAAc;QACpB,IAAI,EAAE,UAAU,CAAC,QAAQ;QACzB,QAAQ;KACT,CAAA;AACH,CAAC;AAED,SAAS,eAAe,CAAC,QAAsB,EAAA;IAC7C,OAAO;AACL,QAAA,IAAI,EAAE,WAAW;QACjB,IAAI,EAAE,UAAU,CAAC,SAAS;QAC1B,QAAQ;KACT,CAAA;AACH,CAAC;AAED,SAAS,oBAAoB,CAAC,KAAiB,EAAA;IAC7C,IAAI,cAAc,GAAc,EAAE,CAAA;AAClC,IAAA,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;AACxB,QAAA,IAAI,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,CAAA;AACzB,QAAA,IAAI,SAAS,CAAC,OAAO,CAAC,EAAE;AACtB,YAAA,MAAM,CAAC,cAAc,CAAC,cAAc,EAAE,IAAI,EAAE;gBAC1C,GAAG,GAAA;oBACD,OAAQ,OAAmB,CAAC,KAAK,CAAA;iBAClC;AACF,aAAA,CAAC,CAAA;AACH,SAAA;AAAM,aAAA;AACL,YAAA,cAAc,CAAC,IAAI,CAAC,GAAG,OAAO,CAAA;AAC/B,SAAA;AACF,KAAA;AAED,IAAA,OAAO,cAAc,CAAA;AACvB,CAAC;AAED;AACA,SAAS,WAAW,CAAC,OAAgB,EAAA;IACnC,OAAO;AACL,QAAA,IAAI,EAAE,WAAW;QACjB,IAAI,EAAE,UAAU,CAAC,KAAK;QACtB,OAAO;KACR,CAAA;AACH,CAAC;AAED;AACA,SAAS,eAAe,CAAC,SAAwB,EAAE,KAAiB,EAAE,QAAsB,EAAA;AAC1F,IAAA,IAAI,cAAc,GAAG,oBAAoB,CAAC,KAAK,CAAC,CAAA;IAEhD,IACI,SAAS,CAAC,SAAS;QACnB,SAAS,CAAC,SAAS,CAAC,MAAM;AAC1B,QAAA,UAAU,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,EACxC;QACA,IAAI,cAAc,GAAG,SAA+B,CAAA;QACpD,IAAI,MAAM,GAAG,IAAI,cAAc,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAA;AAEzD,QAAA,MAAM,CAAC,KAAK,GAAG,cAAc,CAAA;AAC7B,QAAA,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAA;AAE1B,QAAA,IAAI,SAAS,GAAG,wBAAwB,CAAC,MAAM,CAAC,CAAA;QAEhD,IAAI,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAA;AACjC,QAAA,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;AACzB,QAAA,IAAI,EAAE,GAAe;AACnB,YAAA,IAAI,EAAE,gBAAgB;AACtB,YAAA,IAAI,EAAE,WAAW,CAAC,EAAE,CAAC;AACrB,YAAA,KAAK,EAAE,cAAc;AACrB,YAAA,QAAQ,EAAE,QAAQ;YAClB,IAAI,EAAE,UAAU,CAAC,SAAS;AAC1B,YAAA,iBAAiB,EAAE,SAAS;SAC7B,CAAA;AAED,QAAA,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,CAAA;AAE/B,QAAA,OAAO,EAAE,CAAA;AACV,KAAA;AAAM,SAAA;QACL,IAAI,iBAAiB,GAAG,SAAkC,CAAA;AAC1D,QAAA,IAAI,SAAS,GAAG,IAAI,kBAAkB,EAAE,CAAA;QACxC,IAAI,EAAE,GAAG,iBAAiB,CAAC,EAAC,KAAK,EAAE,cAAc,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAC,CAAC,CAAA;AACzG,QAAA,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;AACzB,QAAA,IAAI,EAAE,GAAgB;AACpB,YAAA,IAAI,EAAE,gBAAgB;AACtB,YAAA,IAAI,EAAE,WAAW,CAAC,EAAE,CAAC;AACrB,YAAA,KAAK,EAAE,cAAc;AACrB,YAAA,QAAQ,EAAE,QAAQ;YAClB,IAAI,EAAE,UAAU,CAAC,SAAS;AAC1B,YAAA,iBAAiB,EAAE,SAAS;SAC7B,CAAA;AAED,QAAA,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,CAAA;AAC/B,QAAA,OAAO,EAAE,CAAA;AACV,KAAA;AACH;;AC3MA;AACgB,SAAA,eAAe,CAAC,KAAY,EAAE,GAAQ,EAAA;;;;;AAMlD,IAAA,IAAI,gBAAgB,CAAC,KAAK,CAAC,EAAE;QACzB,KAAK,CAAC,IAAI,GAAG,eAAe,CAAC,KAAK,CAAC,IAAI,EAAE,GAAG,CAAC,CAAA;AAChD,KAAA;IAED,IACI,cAAc,CAAC,KAAK,CAAC;QACrB,eAAe,CAAC,KAAK,CAAC;QACtB,YAAY,CAAC,KAAK,CAAC,EACrB;QACE,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,IAAI,eAAe,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAA;AAC1E,KAAA;IAED,IACI,cAAc,CAAC,KAAK,CAAC;QACrB,gBAAgB,CAAC,KAAK,CAAC,EACzB;;;AAGE,QAAA,IAAI,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAA;QACnF,OAAO,SAAS,CAAC,MAAM,CAAQ,CAAC,GAAG,EAAE,GAAG,KAAI;AACxC,YAAA,IAAI,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,IAAI,EAAE;gBAC9C,IAAI,GAAG,GAAI,GAAG,CAAC,OAAO,CAAC,EAAC,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,CAAA;AACrE,gBAAA,OAAO,WAAW,CAAE,GAAG,KAAK,SAAS,GAAG,GAAG,GAAG,GAAG,CAAE,CAAA;AACtD,aAAA;AAAK,iBAAA;AACF,gBAAA,OAAO,GAAG,CAAA;AACb,aAAA;SACJ,EAAE,KAAK,CAAC,CAAA;AACZ,KAAA;AAED,IAAA,OAAO,KAAK,CAAA;AAChB,CAAC;AAEK,SAAU,aAAa,CAAY,QAAgB,EAAE,OAAqB,EAAE,WAAmB,CAAC,EAAA;AAClG,IAAA,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG;QACtB,OAAO,EAAE,QAAQ,EAAE,QAAQ;KAC9B,CAAA;AACL;;ACpDA;;;AAGE;MACW,OAAO,CAAA;IAOlB,WAAY,CAAA,WAAuB,EAAE,QAAyD,EAAA;QAC5F,UAAU,CAAC,IAAI,CAAC,CAAA;AAChB,QAAA,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC,KAAK,CAAA;AAC9B,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;AACxB,QAAA,IAAI,CAAC,WAAW,GAAG,WAAW,CAAA;QAC9B,UAAU,CAAC,IAAI,CAAC,CAAA;KACjB;IAED,MAAM,GAAA;;AACJ,QAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAA;AACrC,QAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAA;AACzB,QAAA,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAA;AACrB,QAAA,IAAI,IAAI,GAAG,EAAE,kBAAkB,EAAE,IAAI,CAAC,MAAM,EAAE,kBAAkB,EAAE,IAAI,CAAC,UAAU,EAAE,CAAA;QACnF,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAA;QACvC,IAAI,CAAC,MAAM,GAAG,CAAA,EAAA,GAAA,IAAI,CAAC,UAAU,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,KAAK,EAAE,CAAA;KACvC;AACF,CAAA;AAGD;;AAEE;AACc,SAAA,KAAK,CAAU,WAAmC,EAAE,QAA4C,EAAA;AAC9G,IAAA,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC;AAAE,QAAA,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC,CAAA;IAC9D,OAAO,IAAI,OAAO,CAAI,WAAW,EAAE,UAAU,QAAW,EAAE,QAAW,EAAA;AACnE,QAAA,QAAQ,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAA;AAC9B,KAAC,CAAC,CAAA;AACJ,CAAC;AAED;;AAEE;SACc,UAAU,CAAC,WAAmB,EAAE,QAAoD,EAAE,GAAQ,EAAA;AAC5G,IAAA,IAAI,OAAO,GAAG,IAAI,OAAO,CAAc,WAAW,CAAC,OAAO,EAAE,UAAU,QAAqB,EAAE,QAAqB,EAAE,IAAI,EAAA;QACtH,MAAM,QAAQ,GAAG,QAAiB,CAAA;AAClC,QAAA,MAAM,QAAQ,GAAG,eAAe,CAAC,WAAW,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAA;;AAIhF,QAAA,IAAI,YAAY,CAAC,QAAQ,CAAC,EAAE;YAC1B,QAAQ,CAAC,QAAQ,GAAG,IAAI,KAAA,IAAA,IAAJ,IAAI,KAAJ,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,IAAI,CAAE,kBAAkB,CAAA;AAC7C,SAAA;;AAED,QAAA,IAAI,YAAY,CAAC,QAAQ,CAAC,EAAE;YAC1B,QAAQ,CAAC,QAAQ,GAAG,IAAI,KAAA,IAAA,IAAJ,IAAI,KAAJ,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,IAAI,CAAE,kBAAkB,CAAA;AAC7C,SAAA;AAED,QAAA,QAAQ,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAA;AAC5B,QAAA,OAAO,CAAC,KAAK,GAAG,QAAQ,CAAA;AACxB,QAAA,WAAW,CAAC,KAAK,GAAG,QAAQ,CAAA;AAC9B,KAAC,CAAC,CAAA;AAEF,IAAA,OAAO,OAAO,CAAC,KAAK,GAAG,eAAe,CAAC,WAAW,CAAC,kBAAkB,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,CAAA;AAC7F,CAAC;AAED,SAAS,kBAAkB,CAAC,KAAU,EAAA;AACpC,IAAA,IAAI,UAAU,CAAC,KAAK,CAAC,EAAE;AACrB,QAAA,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAA;AAC9B,QAAA,OAAO,MAAM,CAAC,KAAK,CAAC,CAAA;AACrB,KAAA;AACD,IAAA,OAAO,KAAK,CAAA;AACd,CAAC;AAED;;AAEE;AACc,SAAA,SAAS,CAAC,UAAmB,EAAE,QAAoD,EAAA;IACjG,OAAO,IAAI,OAAO,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC,KAAK,CAAA;AAChD;;ACpFM,SAAU,YAAY,CAAC,KAAe,EAAE,SAAsB,EAAE,MAAqB,EAAE,GAAS,EAAA;IAIpG,MAAM,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;AAC7C,IAAA,KAAK,CAAC,EAAE,GAAG,EAAE,CAAA;IACb,iBAAiB,CAAC,KAAK,CAAC,CAAA;IACxB,aAAa,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,EAAE,SAAS,EAAE,GAAG,CAAC,CAAA;AACjD,IAAA,SAAS,CAAC,YAAY,CAAC,EAAE,EAAE,MAAO,CAAC,CAAA;AACrC,CAAC;AAEe,SAAA,cAAc,CAAC,KAAe,EAAE,SAAsB,EAAA;AACpE,IAAA,KAAK,CAAC,EAAE,CAAC,MAAM,EAAE,CAAA;AACnB,CAAC;AAEK,SAAU,iBAAiB,CAAC,KAAe,EAAA;AAC/C,IAAA,IAAI,EAAE,GAAG,KAAK,CAAC,EAAE,CAAA;AACjB,IAAA,IAAI,KAAK,GAAG,KAAK,CAAC,KAAK,CAAA;;AAGvB,IAAA,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;AACtB,QAAA,IAAI,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,CAAA;AACvB,QAAA,IAAI,SAAS,CAAC,KAAK,CAAC,EAAE;YACpB,IAAI,UAAU,GAAG,SAAS,CAAC,KAAK,EAAE,CAAC,QAAQ,EAAE,QAAQ,KAAK,gBAAgB,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC,CAAA;AACzG,YAAA,cAAc,CAAC,EAAE,EAAE,IAAI,EAAE,UAAU,CAAC,CAAA;AACrC,SAAA;AAAM,aAAA;AACL,YAAA,cAAc,CAAC,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,CAAA;AAChC,SAAA;AACF,KAAA;AACH,CAAC;AAED;;AAEE;SACc,cAAc,CAAC,EAAe,EAAE,IAAY,EAAE,KAAU,EAAA;IACtE,IAAI,SAAS,CAAC,IAAI,CAAC,IAAI,UAAU,CAAC,KAAK,CAAC,EAAE;QACxC,IAAI,OAAO,GAAG,UAAU,CAAA;QACxB,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;QAChC,MAAM,IAAI,EAAE,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,iBAAiB,EAAE,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAA;QAC5E,OAAM;AACP,KAAA;AAED,IAAA,QAAQ,IAAI;AACV,QAAA,KAAK,WAAW;AACd,YAAA,EAAE,CAAC,SAAS,GAAG,MAAM,CAAC,KAAK,CAAC,CAAA;YAC5B,MAAK;AACP,QAAA,KAAK,OAAO;AACV,YAAA,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE;AACnB,gBAAA,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,CAAA;AAC1B,aAAA;AACH,QAAA;AACE,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;AAC/B,KAAA;AACH,CAAC;AAED;;AAEE;AACI,SAAU,UAAU,CAAC,KAAuB,EAAA;IAChD,IAAI,eAAe,GAAG,EAAE,CAAA;AACxB,IAAA,KAAK,IAAI,OAAO,IAAI,KAAK,EAAE;AACzB,QAAA,eAAe,CAAC,IAAI,CAAC,CAAA,EAAG,OAAO,CAAA,CAAA,EAAI,KAAK,CAAC,OAAO,CAAC,CAAG,CAAA,CAAA,CAAC,CAAA;AACtD,KAAA;AACD,IAAA,OAAO,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;AACjC;;ACjEgB,SAAA,WAAW,CAAC,QAAe,EAAE,QAAe,EAAA;AAC1D,IAAA,OAAO,QAAQ,CAAC,IAAI,KAAK,QAAQ,CAAC,IAAI,CAAA;AACxC,CAAC;AAED;AACM,SAAU,cAAc,CAAC,KAAY,EAAA;IACzC,QAAQ,KAAK,CAAC,IAAI;QAChB,KAAK,UAAU,CAAC,IAAI,CAAC;QACrB,KAAK,UAAU,CAAC,OAAO,CAAC;QACxB,KAAK,UAAU,CAAC,SAAS,CAAC;QAC1B,KAAK,UAAU,CAAC,QAAQ;AACtB,YAAA,OAAO,KAAK,CAAC,EAAG,CAAC,WAAW,CAAA;QAC9B,KAAK,UAAU,CAAC,SAAS;AACvB,YAAA,OAAQ,KAAoB,CAAC,IAAI,CAAC,EAAG,CAAC,WAAW,CAAA;QACnD,KAAK,UAAU,CAAC,KAAK;AACnB,YAAA,OAAO,cAAc,CAAC,KAAK,CAAC,KAAM,CAAC,CAAA;AACtC,KAAA;AACH,CAAC;AAEK,SAAU,KAAK,CAAC,QAAe,EAAE,QAAe,EAAE,SAAsB,EAAE,GAAS,EAAA;;IAGvF,IAAI,QAAQ,KAAK,QAAQ;QAAE,OAAM;;AAGjC,IAAA,IAAI,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAE;QACnC,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAA;AAExC,QAAA,IAAI,IAAI,KAAK,UAAU,CAAC,IAAI,EAAE;AAC5B,YAAA,SAAS,CAAQ,QAAQ,EAAS,QAAmB,CAAC,CAAA;AACvD,SAAA;AAAM,aAAA,IAAI,IAAI,KAAK,UAAU,CAAC,SAAS,EAAE;YACxC,IAAI,GAAG,aAAH,GAAG,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAH,GAAG,CAAE,OAAO,CAAC,SAAS,EAAE;AAC1B,gBAAA,eAAe,CAAa,QAAQ,EAAc,QAAQ,EAAE,SAAS,CAAC,CAAA;AACvE,aAAA;AAAM,iBAAA;AACL,gBAAA,cAAc,CAAa,QAAQ,EAAc,QAAQ,EAAE,SAAS,CAAC,CAAA;AACtE,aAAA;AACF,SAAA;AAAM,aAAA;;AAEL,YAAA,MAAM,WAAW,GAAG,cAAc,CAAC,QAAQ,CAAC,CAAA;AAC5C,YAAA,OAAO,CAAC,QAAmB,CAAC,CAAA;AAC5B,YAAA,KAAK,CAAC,QAAQ,EAAE,SAAS,EAAE,WAAoC,CAAC,CAAA;AACjE,SAAA;AAEF,KAAA;AAAM,SAAA;;AAEL,QAAA,MAAM,WAAW,GAAG,cAAc,CAAC,QAAQ,CAAC,CAAA;AAC5C,QAAA,OAAO,CAAC,QAAmB,CAAC,CAAA;AAC5B,QAAA,KAAK,CAAC,QAAQ,EAAE,SAAS,EAAE,WAAoC,CAAC,CAAA;AACjE,KAAA;AAEH,CAAC;SAEe,SAAS,CAAC,QAAe,EAAE,QAAe,EAAE,SAAsB,EAAA;IAChF,QAAQ,CAAC,EAAG,CAAC,SAAS,GAAG,QAAQ,CAAC,QAAQ,CAAA;AAC1C,IAAA,QAAQ,CAAC,EAAE,GAAG,QAAQ,CAAC,EAAE,CAAA;AAC3B,CAAC;AAEK,SAAU,gBAAgB,CAAC,QAAa,EAAE,QAAa,EAAE,EAAe,EAAE,IAAY,EAAA;AAC1F,IAAA,cAAc,CAAC,EAAE,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAA;AACpC,CAAC;SAEe,eAAe,CAAC,QAAoB,EAAE,QAAoB,EAAE,SAAsB,EAAA;AAChG,IAAA,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;AACtB,QAAA,cAAc,CAAC,QAAQ,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAA;QAC7C,OAAM;AACP,KAAA;AAED,IAAA,MAAM,WAAW,GAAG,QAAQ,CAAC,QAAQ,CAAA;AACrC,IAAA,MAAM,WAAW,GAAG,QAAQ,CAAC,QAAQ,CAAA;AACrC,IAAA,MAAM,WAAW,GAAG,QAAQ,CAAC,QAAQ,CAAA;AACrC,IAAA,MAAM,WAAW,GAAG,QAAQ,CAAC,QAAQ,CAAA;IAErC,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;AAC9C,QAAA,cAAc,CAAC,QAAQ,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAA;QAC7C,OAAM;AACP,KAAA;AAED,IAAA,QAAQ,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAA;AACjC,IAAA,QAAQ,CAAC,EAAE,GAAG,QAAQ,CAAC,EAAE,CAAA;;AAIzB,IAAA,IAAI,GAAG,GAAG,IAAI,GAAG,EAAwB,CAAA;IACzC,WAAW,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,KAAI;QAClC,IAAI,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;AACvB,QAAA,IAAI,CAAC,GAAG;YAAE,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,GAAG,EAAE,CAAC,CAAA;AACjC,QAAA,GAAG,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,WAAW,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAA;AAC5D,KAAC,CAAC,CAAA;AAEF,IAAA,IAAI,MAAM,GAAG,CAAC,IAAS,KAAI;QACzB,IAAI,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;AACvB,QAAA,IAAI,CAAC,GAAG;AAAE,YAAA,OAAO,KAAK,CAAA;AAEtB,QAAA,IAAI,KAAK,GAAG,GAAG,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;QAE/C,IAAI,KAAK,GAAG,CAAC,CAAC;AAAE,YAAA,OAAO,GAAG,CAAC,KAAK,CAAC,CAAA;;AAC5B,YAAA,OAAO,KAAK,CAAA;AACnB,KAAC,CAAA;AAED,IAAA,IAAI,OAAO,GAAG,CAAC,IAAS,EAAE,IAAc,KAAI;QAC1C,IAAI,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;AACvB,QAAA,IAAI,CAAC,GAAG;YAAE,OAAM;AAEhB,QAAA,IAAI,KAAK,GAAG,GAAG,CAAC,SAAS,CAAC,KAAK,IAAI,KAAK,KAAK,IAAI,CAAC,CAAA;AAClD,QAAA,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAA;AACtB,KAAC,CAAA;AAED,IAAA,IAAI,aAAa,GAAG,EAAE,IAAI,EAAE,WAAW,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAA;IAEtD,WAAW,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,QAAQ,KAAI;AACrC,QAAA,IAAI,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,CAAA;AACtB,QAAA,IAAI,GAAG,EAAE;AACP,YAAA,IAAI,GAAG,CAAC,KAAK,GAAG,aAAa,CAAC,KAAK,EAAE;AACnC,gBAAA,IAAI,IAAsB,CAAA;gBAC1B,IAAI,QAAQ,GAAG,CAAC,EAAE;oBAChB,IAAI,GAAG,cAAc,CAAC,WAAW,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAqB,CAAA;AACrE,iBAAA;AAAM,qBAAA;AACL,oBAAA,IAAI,GAAG,cAAc,CAAC,aAAa,CAAC,IAAI,CAAqB,CAAA;AAC9D,iBAAA;gBAED,iBAAiB,CAAC,SAAS,EAAE,GAAG,CAAC,IAAI,EAAE,IAA6B,CAAC,CAAA;;AAEtE,aAAA;AAAM,iBAAA;gBACL,aAAa,GAAG,GAAG,CAAA;AACpB,aAAA;AAED,YAAA,WAAW,CAAC,QAAQ,CAAC,GAAG,GAAG,CAAC,IAAI,CAAA;AAChC,YAAA,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAA;AACnB,SAAA;AAAM,aAAA;;AAEL,YAAA,IAAI,IAAsB,CAAA;YAC1B,IAAI,QAAQ,GAAG,CAAC,EAAE;gBAChB,IAAI,GAAG,cAAc,CAAC,WAAW,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAqB,CAAA;AACrE,aAAA;AAAM,iBAAA;AACL,gBAAA,IAAI,GAAG,cAAc,CAAC,aAAa,CAAC,IAAI,CAAqB,CAAA;AAC9D,aAAA;AAED,YAAA,IAAI,OAAO,GAAG,WAAW,CAAC,QAAQ,CAAC,CAAA;AACnC,YAAA,KAAK,CAAC,OAAO,EAAE,SAAS,EAAE,IAA+B,CAAC,CAAA;;AAE3D,SAAA;AACH,KAAC,CAAC,CAAA;AAGF,IAAA,GAAG,CAAC,OAAO,CAAC,KAAK,IAAG;AAClB,QAAA,KAAK,CAAC,OAAO,CAAC,IAAI,IAAG;AACnB,YAAA,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;AACd,gBAAA,OAAO,CAAC,IAAI,CAAC,IAAe,CAAC,CAAA;AAC9B,aAAA;AACH,SAAC,CAAC,CAAA;AACJ,KAAC,CAAC,CAAA;AACJ,CAAC;AAED,SAAS,cAAc,CAAC,QAAoB,EAAE,QAAoB,EAAE,SAAsB,EAAA;AACxF,IAAA,MAAM,WAAW,GAAG,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAA;AAC3C,IAAA,OAAO,CAAC,QAAmB,CAAC,CAAA;AAC5B,IAAA,KAAK,CAAC,QAAQ,EAAE,SAAS,EAAE,WAAoC,CAAC,CAAA;AAClE,CAAC;AAGD;;AAEG;AACH,SAAS,iBAAiB,CAAC,SAAsB,EAAE,IAAW,EAAE,IAAgB,EAAA;AAC9E,IAAA,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,OAAO,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,IAAI,EAAE;QACrE,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,EAAG,EAAE,IAAK,CAAC,CAAA;AACxC,KAAA;AAAM,SAAA,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,SAAS,EAAE;QAC7C,SAAS,CAAC,YAAY,CAAE,IAAmB,CAAC,IAAI,CAAC,EAAG,EAAE,IAAK,CAAC,CAAA;AAC7D,KAAA;AACI,SAAA,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,SAAS,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,QAAQ,EAAE;AAChF,QAAA,IAAI,KAAK,GAAiC,IAAI,CAAC,MAAM,CAAA;QACrD,IAAI,UAAU,GAAG,KAAK,KAAA,IAAA,IAAL,KAAK,KAAL,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,KAAK,CAAE,WAAW,CAAA;AACnC,QAAA,IAAI,GAAG,GAAiC,IAAI,CAAC,EAAE,CAAA;QAC/C,OAAO,KAAK,KAAK,GAAG,EAAE;AACpB,YAAA,SAAS,CAAC,YAAY,CAAC,KAAM,EAAE,IAAK,CAAC,CAAA;YACrC,KAAK,GAAG,UAAU,CAAA;YAClB,UAAU,GAAG,KAAK,KAAL,IAAA,IAAA,KAAK,uBAAL,KAAK,CAAE,WAAW,CAAA;AAChC,SAAA;AACD,QAAA,SAAS,CAAC,YAAY,CAAC,GAAI,EAAE,IAAK,CAAC,CAAA;AACpC,KAAA;AACH;;ACrKM,SAAU,KAAK,CAAC,KAAY,EAAE,SAAsB,EAAE,MAAqB,EAAE,GAAS,EAAA;AAC1F,IAAA,IAAI,cAAc,CAAC,KAAK,CAAC,EAAE;QACzB,YAAY,CAAC,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,CAAC,CAAA;AAC5C,KAAA;AAAM,SAAA,IAAI,WAAW,CAAC,KAAK,CAAC,EAAE;AAC7B,QAAA,SAAS,CAAC,KAAK,EAAE,SAAS,EAAE,MAAM,CAAC,CAAA;AACpC,KAAA;AAAM,SAAA,IAAI,eAAe,CAAC,KAAK,CAAC,EAAE;QACjC,aAAa,CAAC,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,CAAC,CAAA;AAC7C,KAAA;AAAM,SAAA,IAAI,YAAY,CAAC,KAAK,CAAC,EAAE;QAC9B,cAAc,CAAC,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,CAAC,CAAA;AAC9C,KAAA;AAAM,SAAA,IAAI,gBAAgB,CAAC,KAAK,CAAC,EAAE;QAClC,cAAc,CAAC,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,CAAC,CAAA;AAC9C,KAAA;AAAM,SAAA,IAAI,YAAY,CAAC,KAAK,CAAC,EAAE;QAC9B,UAAU,CAAC,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,CAAC,CAAA;AAC1C,KAAA;AAAM,SAAA;AACL,QAAA,MAAM,WAAW,CAAA;AAClB,KAAA;AACH,CAAC;AAEe,SAAA,OAAO,CAAC,KAAY,EAAE,SAAsB,EAAA;AAC1D,IAAA,IAAI,cAAc,CAAC,KAAK,CAAC,EAAE;AACzB,QAAA,cAAc,CAAC,KAAgB,CAAC,CAAA;AACjC,KAAA;AAAM,SAAA,IAAI,WAAW,CAAC,KAAK,CAAC,EAAE;AAC7B,QAAA,WAAW,CAAC,KAAgB,CAAC,CAAA;AAC9B,KAAA;AAAM,SAAA,IAAI,eAAe,CAAC,KAAK,CAAC,EAAE;AACjC,QAAA,eAAe,CAAC,KAAgB,CAAC,CAAA;AAClC,KAAA;AAAM,SAAA,IAAI,YAAY,CAAC,KAAK,CAAC,EAAE;AAC9B,QAAA,gBAAgB,CAAC,KAAgB,CAAC,CAAA;AACnC,KAAA;AAAM,SAAA,IAAI,gBAAgB,CAAC,KAAK,CAAC,EAAE;AAClC,QAAA,gBAAgB,CAAC,KAAgB,CAAC,CAAA;AACnC,KAAA;AAAM,SAAA;AACL,QAAA,MAAM,WAAW,CAAA;AAClB,KAAA;AACH,CAAC;AAEK,SAAU,aAAa,CAAC,QAAsB,EAAE,SAAsB,EAAE,MAAqB,EAAE,GAAS,EAAA;AAC5G,IAAA,QAAQ,CAAC,OAAO,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,CAAC,CAAC,CAAA;AACjE,CAAC;SAEe,SAAS,CAAC,KAAY,EAAE,SAAsB,EAAE,MAAqB,EAAA;IACnF,MAAM,EAAE,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAA;AAClD,IAAA,KAAK,CAAC,EAAE,GAAG,EAAE,CAAA;AACb,IAAA,SAAS,CAAC,YAAY,CAAC,EAAE,EAAE,MAAO,CAAC,CAAA;AACrC,CAAC;AAEe,SAAA,WAAW,CAAC,KAAY,EAAE,SAAsB,EAAA;AAC9D,IAAA,KAAK,CAAC,EAAE,CAAC,MAAM,EAAE,CAAA;AACnB,CAAC;AAEK,SAAU,aAAa,CAAC,KAAgB,EAAE,SAAsB,EAAE,MAAqB,EAAE,GAAS,EAAA;IACtG,MAAM,KAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAA;IACzC,MAAM,GAAG,GAAG,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAA;AACvC,IAAA,KAAK,CAAC,MAAM,GAAG,KAAK,CAAA;AACpB,IAAA,KAAK,CAAC,EAAE,GAAG,GAAG,CAAA;AACd,IAAA,SAAS,CAAC,YAAY,CAAC,KAAK,EAAE,MAAO,CAAC,CAAA;IACtC,aAAa,CAAC,KAAK,CAAC,QAAQ,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,CAAC,CAAA;AACrD,IAAA,SAAS,CAAC,YAAY,CAAC,GAAG,EAAE,MAAO,CAAC,CAAA;AACtC,CAAC;AAEe,SAAA,eAAe,CAAC,KAAgB,EAAE,SAAsB,EAAA;AACtE,IAAA,MAAM,KAAK,GAAG,KAAK,CAAC,MAAM,CAAA;AAC1B,IAAA,MAAM,GAAG,GAAG,KAAK,CAAC,EAAE,CAAA;IACpB,IAAI,GAAG,GAAqB,KAAK,CAAA;AACjC,IAAA,OAAO,GAAG,IAAI,GAAG,KAAK,GAAG,EAAE;AACzB,QAAA,IAAI,IAAI,GAAqB,GAAG,CAAC,WAAW,CAAA;QAC5C,GAAG,CAAC,MAAM,EAAE,CAAA;QACZ,GAAG,GAAG,IAAI,CAAA;AACX,KAAA;IACD,GAAG,CAAC,MAAM,EAAE,CAAA;AACd,CAAC;AAEK,SAAU,cAAc,CAAC,KAAiB,EAAE,SAAsB,EAAE,MAAqB,EAAE,GAAS,EAAA;IACxG,MAAM,KAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAA;IACzC,MAAM,GAAG,GAAG,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAA;AACvC,IAAA,KAAK,CAAC,MAAM,GAAG,KAAK,CAAA;AACpB,IAAA,KAAK,CAAC,EAAE,GAAG,GAAG,CAAA;AACd,IAAA,SAAS,CAAC,YAAY,CAAC,KAAK,EAAE,MAAO,CAAC,CAAA;IACtC,aAAa,CAAC,KAAK,CAAC,QAAQ,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,CAAC,CAAA;AACrD,IAAA,SAAS,CAAC,YAAY,CAAC,GAAG,EAAE,MAAO,CAAC,CAAA;AACtC,CAAC;SAEe,gBAAgB,CAAC,KAAiB,EAAE,SAAsB,EAAE,MAAoB,EAAA;AAC9F,IAAA,MAAM,KAAK,GAAG,KAAK,CAAC,MAAM,CAAA;AAC1B,IAAA,MAAM,GAAG,GAAG,KAAK,CAAC,EAAE,CAAA;IACpB,IAAI,GAAG,GAAqB,KAAK,CAAA;AACjC,IAAA,OAAO,GAAG,IAAI,GAAG,KAAK,GAAG,EAAE;AACzB,QAAA,IAAI,IAAI,GAAqB,GAAG,CAAC,WAAW,CAAA;QAC5C,GAAG,CAAC,MAAM,EAAE,CAAA;QACZ,GAAG,GAAG,IAAI,CAAA;AACX,KAAA;IACD,GAAG,CAAC,MAAM,EAAE,CAAA;AACd,CAAC;AAEK,SAAU,cAAc,CAAC,KAAiB,EAAE,SAAsB,EAAE,MAAqB,EAAE,GAAS,EAAA;AACxG,IAAA,MAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAA;AACvB,IAAA,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAA;IAC5C,KAAK,CAAC,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,CAAC,CAAA;AACnC,IAAA,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;AACzC,CAAC;AAEe,SAAA,gBAAgB,CAAC,KAAiB,EAAE,SAAsB,EAAA;AACxE,IAAA,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAA;AAC/C,IAAA,OAAO,CAAC,KAAK,CAAC,IAAe,CAAC,CAAA;AAC9B,IAAA,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;AAC3C,CAAC;AAEK,SAAU,UAAU,CAAC,KAAa,EAAE,SAAsB,EAAE,MAAqB,EAAE,GAAS,EAAA;IAChG,IAAI,UAAU,GAAG,UAAU,CAAC,KAAK,EAAE,CAAC,QAAQ,EAAE,QAAQ,KAAK,KAAK,CAAC,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,CAAC,EAAE,GAAI,CAAC,CAAA;AAC3G,IAAA,KAAK,CAAC,KAAK,GAAG,UAAU,CAAA;IACxB,KAAK,CAAC,UAAU,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,CAAC,CAAA;AAC3C;;MC9FsB,SAAS,CAAA;AAA/B,IAAA,WAAA,GAAA;QAQE,IAAK,CAAA,KAAA,GAAa,QAAQ,CAAA;KAoB3B;AAAA,CAAA;AAEK,SAAU,eAAe,CAAC,aAAoC,EAAA;AAClE,IAAA,OAAO,aAAa,CAAA;AACtB;;ACnEA;AACM,SAAU,cAAc,CAAC,GAAQ,EAAA;IACnC,GAAG,CAAC,KAAK,CAAC,WAAW,EAAE,UAAU,EAAC,KAAK,EAAE,KAAK,EAAC,EAAA;QAC3C,IAAI,SAAS,GAAG,KAAK,CAAC,KAAM,CAAC,WAAW,CAAC,CAAA;AACzC,QAAA,IAAG,SAAS,CAAC,SAAS,CAAC,EAAE;AACrB,YAAA,IAAI,OAAO,GAAI,SAAS,CAAC,QAAQ,CAAA;AACjC,YAAA,SAAS,CAAC,QAAQ,GAAG,MAAK;AACtB,gBAAA,IAAI,KAAK,GAAG,OAAO,EAAE,CAAA;AACrB,gBAAA,IAAI,aAAa,CAAC,KAAK,CAAC,EAAE;AACtB,oBAAA,OAAO,YAAY,CAAC,KAAK,CAAC,CAAA;AAC7B,iBAAA;AAAM,qBAAA,IAAI,OAAO,CAAC,KAAK,CAAC,EAAE;AACvB,oBAAA,OAAO,WAAW,CAAC,KAAK,CAAC,CAAA;AAC5B,iBAAA;AAAM,qBAAA;AACH,oBAAA,OAAO,KAAK,CAAA;AACf,iBAAA;AACL,aAAC,CAAA;AACJ,SAAA;AACL,KAAC,CAAC,CAAA;AACN,CAAC;AAED,SAAS,YAAY,CAAC,KAA8B,EAAA;IAChD,IAAI,KAAK,GAAG,EAAE,CAAA;AACd,IAAA,KAAK,IAAI,CAAC,IAAI,KAAK,EAAE;QACjB,IAAG,KAAK,CAAC,CAAC,CAAC;AAAE,YAAA,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AAC7B,KAAA;AAED,IAAA,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;AAC1B,CAAC;AAED,SAAS,WAAW,CAAC,KAAoB,EAAA;AACrC,IAAA,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;AAC1B;;MCvBa,GAAG,CAAA;IAOd,WAAY,CAAA,KAAY,EAAE,OAAiB,EAAA;AACzC,QAAA,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;AACtB,QAAA,IAAI,CAAC,OAAO,GAAG,OAAO,IAAI,EAAE,CAAA;AAC5B,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAA;AACpB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAA;QAClB,IAAI,CAAC,KAAK,EAAE,CAAA;KACb;IAEO,KAAK,GAAA;QACX,cAAc,CAAC,IAAI,CAAC,CAAA;KACrB;AAED,IAAA,KAAK,CAAC,QAA+B,EAAA;AACnC,QAAA,IAAG,QAAQ,EAAE;YACX,MAAM,EAAE,GAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,GAAG,QAAQ,KAAK,QAAQ,CAAC,IAAI,CAAA;AAC/F,YAAA,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,EAAE,EAAiB,EAAE,SAAS,EAAE,IAAI,CAAC,CAAA;AACjF,SAAA;AAAK,aAAA;AACJ,YAAA,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,EAAE,QAAQ,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,CAAA;AAC7E,SAAA;;;;KAKF;AAED,IAAA,GAAG,CAAC,MAAqB,EAAA;QACvB,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC,CAAA;QAC3C,IAAG,KAAK,GAAG,CAAC,CAAC;AAAE,YAAA,OAAO,IAAI,CAAA;QAE1B,MAAM,GAAG,GAAG,EAAC,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAC,CAAA;AAExC,QAAA,IAAI,UAAU,CAAC,MAAM,CAAC,EAAE;YACtB,MAAM,CAAC,GAAG,CAAC,CAAA;AACZ,SAAA;AAAM,aAAA;AACL,YAAA,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAA;AACpB,SAAA;AACD,QAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;AAC5B,QAAA,OAAO,IAAI,CAAA;KACZ;AAED,IAAA,KAAK,CAAC,QAAgB,EAAE,OAAqB,EAAE,QAAiB,EAAA;QAC9D,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAA;AACrD,QAAA,OAAO,IAAI,CAAA;KACZ;AACF,CAAA;AAEe,SAAA,SAAS,CAAC,KAAY,EAAE,OAAiB,EAAA;AACvD,IAAA,OAAO,IAAI,GAAG,CAAC,KAAK,EAAE,OAAO,CAAC,CAAA;AAChC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}